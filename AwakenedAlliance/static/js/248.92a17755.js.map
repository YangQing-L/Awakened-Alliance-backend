{"version":3,"file":"static/js/248.92a17755.js","mappings":"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GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAA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","sources":["webpack://awakened_alliance/./src/assets/scripts/game_view/init.js","webpack://awakened_alliance/./src/views/PlayGroundView.vue","webpack://awakened_alliance/./src/assets/scripts/game_view/AcGameObject.js","webpack://awakened_alliance/./src/assets/scripts/game_view/map_element/Grid.js","webpack://awakened_alliance/./src/assets/scripts/game_view/map_element/Wall.js","webpack://awakened_alliance/./src/assets/scripts/game_view/map_element/Floor.js","webpack://awakened_alliance/./src/assets/scripts/game_view/MultiGameMap.js","webpack://awakened_alliance/./src/assets/scripts/game_view/Particle.js","webpack://awakened_alliance/./src/assets/scripts/game_view/skill/FireBall.js","webpack://awakened_alliance/./src/assets/scripts/game_view/player_component/HealthBar.js","webpack://awakened_alliance/./src/assets/scripts/game_view/skill/Skill.js","webpack://awakened_alliance/./src/assets/scripts/game_view/skill/FireBallSkill.js","webpack://awakened_alliance/./src/assets/scripts/game_view/skill/BlinkSkill.js","webpack://awakened_alliance/./src/assets/scripts/game_view/skill/ShieldSkill.js","webpack://awakened_alliance/./src/assets/scripts/game_view/player_component/Arrow.js","webpack://awakened_alliance/./src/assets/scripts/game_view/heros/Player.js","webpack://awakened_alliance/./src/assets/scripts/game_view/skill/RapidFireSkill.js","webpack://awakened_alliance/./src/assets/scripts/game_view/skill/RollingSkill.js","webpack://awakened_alliance/./src/assets/scripts/game_view/heros/TaiEr.js","webpack://awakened_alliance/./src/assets/scripts/game_view/skill/MagicLightBallSkill.js","webpack://awakened_alliance/./src/assets/scripts/game_view/skill/MagicCircle.js","webpack://awakened_alliance/./src/assets/scripts/game_view/skill/MagicalMagicSkill.js","webpack://awakened_alliance/./src/assets/scripts/game_view/heros/XiaoYe.js","webpack://awakened_alliance/./src/assets/scripts/game_view/skill/DivineAxeSkill.js","webpack://awakened_alliance/./src/assets/scripts/game_view/skill/HeroChargeSkill.js","webpack://awakened_alliance/./src/assets/scripts/game_view/heros/LongYan.js","webpack://awakened_alliance/./src/assets/scripts/game_view/skill/IceArrow.js","webpack://awakened_alliance/./src/assets/scripts/game_view/skill/IceArrowSkill.js","webpack://awakened_alliance/./src/assets/scripts/game_view/skill/ThousandArrowsSkill.js","webpack://awakened_alliance/./src/assets/scripts/game_view/heros/DiShiTian.js","webpack://awakened_alliance/./src/assets/scripts/game_view/socket/multiplayer.js","webpack://awakened_alliance/./src/assets/scripts/game_view/NoticeBoard.js","webpack://awakened_alliance/./src/assets/scripts/game_view/ChatField.js","webpack://awakened_alliance/./src/assets/scripts/game_view/ScoreBoard.js","webpack://awakened_alliance/./src/assets/scripts/game_view/PlayGround.js","webpack://awakened_alliance/./src/components/ChatField.vue","webpack://awakened_alliance/./src/components/ChatField.vue?2872","webpack://awakened_alliance/./src/views/PlayGroundView.vue?669c","webpack://awakened_alliance/./node_modules/js-cookie/dist/js.cookie.mjs"],"sourcesContent":["import $ from 'jquery';\r\nimport router from \"@/router\";\r\nimport Cookies from \"js-cookie\";\r\n\r\nexport const init = (store) => {\r\n    window.refresh_id = -1;\r\n    // const vw = window.innerWidth;\r\n    // const vh = window.innerHeight;\r\n    // AcWingOS.api.window.resize(59.5 * vh / vw, 64.5);\r\n\r\n    const confirm_login_status_web = () => {\r\n        // 如果Cookies里面没有refresh，就说明还未登录或登陆状态过期，使用router跳转到登陆界面\r\n        if (!Cookies.get(\"refresh\")) {\r\n            router.push(\"/login\");\r\n            return false;\r\n        }\r\n\r\n        // 设置每4.5分钟自动更新access\r\n        // （这个函数调用多次会多次更新，刷新后才会失效，所以尽量只在进入页面后调用一次）\r\n        set_auto_refresh_jwt_token();\r\n\r\n        // 登录成功后获取账号信息\r\n        getinfo_web();\r\n    };\r\n\r\n    const confirm_login_status_acapp = () => {\r\n        if (!Cookies.get(\"refresh\")) {\r\n            router.push(\"/login\");\r\n            return false;\r\n        }\r\n\r\n        set_auto_refresh_jwt_token();\r\n\r\n        getinfo_acapp();\r\n    };\r\n\r\n    // 每4.5分钟使用refresh获得新的access_token\r\n    const set_auto_refresh_jwt_token = () => {\r\n        // 先执行一次，然后设置4.5分钟的自动更新\r\n        refresh_jwt_token();\r\n        if (window.refresh_id != -1) {\r\n            clearInterval(window.refresh_id);\r\n            window.refresh_id = -1;\r\n        }\r\n        window.refresh_id = setInterval(refresh_jwt_token, 4.5 * 60 * 1000);\r\n    };\r\n\r\n    const refresh_jwt_token = () => {\r\n        $.ajax({\r\n            url: \"https://app4689.acapp.acwing.com.cn:4436/api/token/refresh/\",\r\n            type: \"post\",\r\n            data: {\r\n                refresh: Cookies.get(\"refresh\"),\r\n            },\r\n            success: (resp) => {\r\n                console.log(\"access刷新成功:\", resp.access);\r\n                // 设置Cookie有效期为4.5分钟\r\n                let expires_time = new Date(new Date() * 1 + 4.5 * 60 * 1000);\r\n                Cookies.set(\"access\", resp.access, {\r\n                    expires: expires_time,\r\n                });\r\n            },\r\n            error: () => {\r\n                console.log(\"access刷新失败\");\r\n            }\r\n        });\r\n    }\r\n\r\n    // 用jwt的token从服务器上获取username和photo信息\r\n    const getinfo_web = () => {\r\n        $.ajax({\r\n            url: \"https://app4689.acapp.acwing.com.cn:4436/settings/getinfo_jwt/\",\r\n            type: \"get\",\r\n            data: {\r\n                platform: store.state.platform,\r\n            },\r\n            headers: {\r\n                Authorization: \"Bearer \" + Cookies.get(\"access\"),\r\n            },\r\n            success: function (resp) {\r\n                if (resp.result === \"success\") {\r\n                    store.commit(\"udpateUsername\", resp.username);\r\n                    store.commit(\"updatePhoto\", resp.photo);\r\n                    // 跳转到游戏界面\r\n                    // outer.hide();\r\n                    // outer.root.menu.show();\r\n                } else {\r\n                    console.log(\"jwt还未登录\");\r\n                }\r\n            },\r\n            error: () => {\r\n                console.log(\"jwt登录报错\");\r\n                router.push(\"/login\");\r\n            },\r\n        });\r\n    };\r\n\r\n    const getinfo_acapp = () => {\r\n        // AcWing第三方授权登录\r\n        $.ajax({\r\n            url: \"https://app4689.acapp.acwing.com.cn:4436/apply_code/\",\r\n            type: \"get\",\r\n            success: function (resp) {\r\n                console.log(\"getinfo_acapp:\", resp);\r\n                if (resp.result === \"success\") {\r\n                    AcWingOS.api.oauth2.authorize(resp.appid, resp.redirect_uri, resp.scope, resp.state, resp => {\r\n                        if (resp.result === \"success\") {\r\n                            // 设置Cookie有效期为4.5分钟\r\n                            let expires_time = new Date(new Date() * 1 + 4.5 * 60 * 1000);\r\n                            Cookies.set(\"access\", resp.access, {\r\n                                expires: expires_time,\r\n                            });\r\n                            // 设置Cookie有效期为14.5天\r\n                            Cookies.set(\"refresh\", resp.refresh, { expires: 14.5 });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    };\r\n\r\n    const AcWingOS = store.state.AcWingOS;\r\n    if (AcWingOS === \"AcWingOS\") {\r\n        confirm_login_status_web();\r\n    } else {\r\n        confirm_login_status_acapp();\r\n    }\r\n}","<template>\r\n    <div class=\"playground\">\r\n        <div ref=\"div\" class=\"game-map-div\">\r\n            <canvas ref=\"canvas\" tabindex=\"0\"></canvas>\r\n            <ChatField ref=\"chat_field_ref\" />\r\n            <!-- <button @click=\"quit_the_game()\">退出游戏</button> -->\r\n            <button ref=\"quit_game_button\" @click=\"quit_the_game()\">\r\n                退出游戏\r\n            </button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted } from \"vue\";\r\nimport { PlayGround } from \"@/assets/scripts/game_view/PlayGround\";\r\n// import { Settings } from \"@/assets/scripts/login_view/Settings\";\r\nimport { useStore } from \"vuex\";\r\nimport router from \"@/router\";\r\nimport { extractTimeFormat, useSizeProp } from \"element-plus\";\r\nimport { init } from \"@/assets/scripts/game_view/init\";\r\nimport ChatField from \"@/components/ChatField\";\r\nimport $ from \"jquery\";\r\n\r\nexport default {\r\n    namespaced: true,\r\n    name: \"PlayGround\",\r\n    components: {\r\n        ChatField,\r\n    },\r\n    setup: () => {\r\n        let div = ref(null);\r\n        let canvas = ref(null);\r\n        let chat_field_ref = ref(null);\r\n        let quit_game_button = ref(null);\r\n        let playground = {\r\n            message: \"let playground\",\r\n        };\r\n\r\n        const store = useStore();\r\n        // 检查登录状态，成功登陆后初始化store\r\n        // init(store);\r\n\r\n        // 当组件被成功挂载之后执行\r\n        onMounted(() => {\r\n            quit_game_button.value.addEventListener(\"mouseleave\", function () {\r\n                canvas.value.focus();\r\n                console.log(\"鼠标移出按钮\");\r\n            });\r\n\r\n            console.log(store.state.game_mode);\r\n            if (store.state.game_mode === \"no mode\") {\r\n                router.push(\"/select_mode\");\r\n                return;\r\n            }\r\n            playground = new PlayGround(\r\n                canvas,\r\n                canvas.value.getContext(\"2d\"),\r\n                div.value,\r\n                store,\r\n                chat_field_ref.value\r\n            );\r\n\r\n            playground.restart(store.state.game_mode);\r\n        });\r\n\r\n        const quit_the_game = () => {\r\n            playground.quit();\r\n        };\r\n\r\n        return {\r\n            div,\r\n            canvas,\r\n            quit_the_game,\r\n            chat_field_ref,\r\n            quit_game_button,\r\n        };\r\n    },\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.playground {\r\n    display: flex;\r\n    width: 100vw;\r\n    height: 100vh;\r\n}\r\n\r\n.game-map-div {\r\n    /* height: calc(100% - 8vh); */\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\n/* canvas居中，不过上面已经居中了，所以这里不需要 */\r\n/* .game-map-div > canvas {\r\n    position: relative;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50, -50%);\r\n} */\r\n\r\ndiv.operation {\r\n    position: absolute;\r\n}\r\n\r\nbutton {\r\n    position: absolute;\r\n    background-color: #0d6efd;\r\n    border: solid 0;\r\n    border-radius: 5px;\r\n    font-size: 3vh;\r\n    color: white;\r\n    padding: 3vh;\r\n    cursor: pointer;\r\n    margin-top: -43%;\r\n    margin-left: 86%;\r\n}\r\n</style>","const AC_GAME_OBJECTS = [];\r\n\r\nexport class AcGameObject {\r\n    constructor() {\r\n        AC_GAME_OBJECTS.push(this);\r\n        this.timedelta = 0;\r\n        this.has_called_start = false;\r\n        this.uuid = this.create_uuid();\r\n    }\r\n\r\n    create_uuid() {\r\n        let res = \"\";\r\n        for (let i = 0; i < 20; i++) {\r\n            let x = parseInt(Math.floor(Math.random() * 10));\r\n            res += x;\r\n        }\r\n        return res;\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    update() {\r\n\r\n    }\r\n\r\n    late_update() {\r\n\r\n    }\r\n\r\n    late_late_update() {\r\n\r\n    }\r\n\r\n    player_component_update() {\r\n\r\n    }\r\n\r\n    on_destroy() {\r\n\r\n    }\r\n\r\n    destroy() {\r\n        this.on_destroy();\r\n\r\n        for (let i in AC_GAME_OBJECTS) {\r\n            const obj = AC_GAME_OBJECTS[i];\r\n            if (obj === this) {\r\n                AC_GAME_OBJECTS.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nlet last_timestamp;\r\nconst step = timestamp => {\r\n    for (let obj of AC_GAME_OBJECTS) {\r\n        if (!obj.has_called_start) {\r\n            obj.start();\r\n            obj.has_called_start = true;\r\n        } else {\r\n            obj.timedelta = timestamp - last_timestamp;\r\n            obj.update();\r\n        }\r\n    }\r\n\r\n    for (let obj of AC_GAME_OBJECTS) {\r\n        obj.late_update();\r\n    }\r\n\r\n    for (let obj of AC_GAME_OBJECTS) {\r\n        obj.late_late_update();\r\n    }\r\n\r\n    for (let obj of AC_GAME_OBJECTS) {\r\n        obj.player_component_update();\r\n    }\r\n\r\n    last_timestamp = timestamp;\r\n    requestAnimationFrame(step);\r\n};\r\n\r\nrequestAnimationFrame(step);","import { AcGameObject } from \"../AcGameObject\";\r\n\r\nexport class Grid extends AcGameObject {\r\n    constructor(game_map, playground, ctx, i, j, cube_side_len, stroke_color) {\r\n        super();\r\n        this.game_map = game_map;\r\n        this.playground = playground;\r\n        this.ctx = ctx;\r\n        this.i = i;\r\n        this.j = j;\r\n        this.cube_side_len = cube_side_len;\r\n        // 因为canvas的xy坐标轴和二维数组是相反的，所以在使用下标计算坐标的时候要反一下\r\n        // 这样在外面New的时候就可以正常使用i和j这样的数组下标\r\n        this.y = this.i * this.cube_side_len;\r\n        this.x = this.j * this.cube_side_len;\r\n\r\n        this.character = \"grid\";\r\n\r\n        // 相对画布的坐标\r\n        this.relative_position_x = 0;\r\n        this.relative_position_y = 0;\r\n\r\n        this.stroke_color = stroke_color;  // 网格线的颜色\r\n        this.is_poisoned = false; // 格子是否在毒圈\r\n        this.base_fill_color = null;\r\n        this.fill_color = this.base_fill_color;\r\n    }\r\n\r\n    start() { }\r\n\r\n    on_destroy() {\r\n        for (let i = 0; i < this.game_map.grids.length; i++) {\r\n            if (this.game_map.grids[i] === this) {\r\n                this.game_map.grids.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    get_manhattan_dist(x1, y1, x2, y2) {\r\n        return Math.max(Math.abs(x1 - x2), Math.abs(y1 - y2));\r\n    }\r\n\r\n    // 计算两点间欧几里得距离\r\n    get_dist(x1, y1, x2, y2) {\r\n        let dx = x1 - x2;\r\n        let dy = y1 - y2;\r\n        return Math.sqrt(dx * dx + dy * dy);\r\n    }\r\n\r\n    update() {\r\n        let scale = this.playground.scale;\r\n        let ctx_x = this.playground.my_calculate_relative_position_x(this.x);\r\n        let ctx_y = this.playground.my_calculate_relative_position_y(this.y);\r\n        let cx = ctx_x + this.cube_side_len * 0.5, cy = ctx_y + this.cube_side_len * 0.5; // grid的中心坐标\r\n\r\n        // 处于屏幕范围外，则不渲染\r\n        if (this.playground.is_element_out_of_screen(cx, cy)) {\r\n            return;\r\n        }\r\n\r\n        this.set_player_point_color();\r\n        this.set_color();\r\n        this.render_grid_stroke(ctx_x, ctx_y, scale);\r\n        this.render(ctx_x, ctx_y, scale);\r\n    }\r\n\r\n    set_color() {\r\n    }\r\n\r\n    set_player_point_color() {\r\n        if (this.playground.players.length > 0) {\r\n            let player = this.playground.players[0];\r\n            if (player.character === \"me\" && this.get_manhattan_dist(this.x + this.cube_side_len / 2, this.y + this.cube_side_len / 2, player.x, player.y) < 0.5 * this.cube_side_len) {\r\n                this.fill_color = \"rgba(56, 93, 56, 0.2)\";\r\n            } else {\r\n                this.fill_color = this.base_fill_color;\r\n            }\r\n        }\r\n    }\r\n\r\n    render(ctx_x, ctx_y, scale) {\r\n    }\r\n\r\n    render_grid_stroke(ctx_x, ctx_y, scale) {\r\n        this.ctx.save();\r\n        this.ctx.beginPath();\r\n        this.ctx.lineWidth = this.cube_side_len * 0.03 * scale;\r\n        this.ctx.strokeStyle = this.stroke_color;\r\n        this.ctx.rect(ctx_x * scale, ctx_y * scale, this.cube_side_len * scale, this.cube_side_len * scale);\r\n        this.ctx.stroke();\r\n        this.ctx.restore();\r\n    }\r\n\r\n    render_grass(ctx_x, ctx_y, scale) {\r\n        this.ctx.save();\r\n        this.ctx.beginPath();\r\n        this.ctx.lineWidth = 0;\r\n        this.ctx.rect(ctx_x * scale, ctx_y * scale, this.cube_side_len * scale, this.cube_side_len * scale);\r\n        this.ctx.fillStyle = this.grass_color;\r\n        this.ctx.fill();\r\n        this.ctx.restore();\r\n    }\r\n}\r\n","import { Grid } from \"./Grid\";\r\n\r\nexport class Wall extends Grid {\r\n    constructor(game_map, playground, ctx, i, j, cube_side_len, stroke_color) {\r\n        super(game_map, playground, ctx, i, j, cube_side_len, stroke_color);\r\n        this.state = \"\"; // 格子里画什么\r\n        this.base_fill_color = \"rgb(213, 198, 76)\"; // Wall\r\n        this.fill_color = this.base_fill_color;\r\n\r\n        this.character = \"wall\";\r\n\r\n        this.eps = 0.001;\r\n    }\r\n\r\n    start() {\r\n        if (this.i === 0 && this.j === 0) {\r\n            this.base_fill_color = \"green\";\r\n        }\r\n    }\r\n\r\n    is_collision(player) {\r\n        if (this.i !== 0 || this.j !== 0) {\r\n            return;\r\n        }\r\n        let wall_center_x = this.x + this.cube_side_len / 2;\r\n        let wall_center_y = this.y + this.cube_side_len / 2;\r\n        let real_dist = this.get_dist(wall_center_x, wall_center_y, player.x, player.y);\r\n        let collision_angle = Math.atan2(this.y - player.y, this.x - player.x);  // angle1\r\n        let speed_angle = player.speed_angle;  // angle2\r\n        let wall_inside_dist = Math.abs((this.cube_side_len / 2) / Math.cos(collision_angle));\r\n\r\n        // 已经在碰撞范围内 且 当前玩家正朝着墙内移动\r\n        if (real_dist - player.radius - wall_inside_dist < this.eps &&\r\n            (Math.abs(collision_angle - speed_angle) < Math.PI / 2 || Math.abs(collision_angle - speed_angle) > Math.PI * 1.5)) {\r\n            this.set_collision_color(\"rgb(213, 198, 76, 0.5)\");\r\n            return this.get_new_angle(collision_angle, speed_angle);\r\n        } else {\r\n            this.set_collision_color(this.base_fill_color);\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    // 传入两个角度collision_angle, speed_angle，计算新的angle3，使得angle3和collision_angle夹角刚好是90度\r\n    // 两个参数分别对应angle1和angle2\r\n    get_new_angle(collision_angle, speed_angle) {\r\n        let d = 0, angle3 = 0;\r\n        // 计算angle3\r\n        if (Math.abs(collision_angle - speed_angle) < Math.PI / 2) {\r\n            d = Math.PI / 2 - Math.abs(collision_angle - speed_angle);\r\n            let diff = speed_angle - collision_angle;\r\n            if (collision_angle > 0 && speed_angle > 0 && diff > 0 ||\r\n                collision_angle < 0 && speed_angle > 0 && diff > 0 ||\r\n                collision_angle < 0 && speed_angle < 0 && diff > 0) {\r\n                angle3 = speed_angle + d;\r\n            } else {\r\n                angle3 = speed_angle - d;\r\n            }\r\n        } else {\r\n            d = Math.PI / 2 - (2 * Math.PI - Math.abs(collision_angle - speed_angle));\r\n            if (speed_angle < 0 && collision_angle > 0) {\r\n                angle3 = speed_angle + d;\r\n            } else if (speed_angle > 0 && collision_angle < 0) {\r\n                angle3 = speed_angle - d;\r\n            }\r\n        }\r\n\r\n        return angle3;\r\n    }\r\n\r\n    set_player_point_color() {\r\n\r\n    }\r\n\r\n    set_collision_color(color) {\r\n        this.fill_color = color;\r\n    }\r\n\r\n    // set_color() {\r\n    //     if (this.playground.players.length > 0) {\r\n    //         let player = this.playground.players[0];\r\n    //         // 玩家周围九个格子的墙会变色（开发测试用）\r\n    //         let real_dist = this.get_manhattan_dist(this.x + this.cube_side_len / 2, this.y + this.cube_side_len / 2, player.x, player.y);\r\n    //         let limit_dist = 1.5 * this.cube_side_len;\r\n    //         if (player.character === \"me\" && real_dist < limit_dist) {\r\n    //             this.fill_color = \"rgb(255, 115, 119)\";\r\n    //         }\r\n    //     }\r\n    // }\r\n\r\n    render(ctx_x, ctx_y, scale) {\r\n        this.ctx.save();\r\n        this.ctx.beginPath();\r\n        this.ctx.lineWidth = 0;\r\n        this.ctx.rect(ctx_x * scale, ctx_y * scale, this.cube_side_len * scale, this.cube_side_len * scale);\r\n        this.ctx.fillStyle = this.fill_color;\r\n        this.ctx.fill();\r\n        this.ctx.restore();\r\n    }\r\n}\r\n","import { Grid } from \"./Grid\";\n\nexport class Floor extends Grid {\n    constructor(game_map, playground, ctx, i, j, cube_side_len, stroke_color) {\n        super(game_map, playground, ctx, i, j, cube_side_len, stroke_color);\n        this.state = \"\"; // 格子里画什么\n        this.base_fill_color = \"rgb(136, 188, 194)\"; // floor light_blue\n        this.fill_color = this.base_fill_color;\n\n        this.character = \"floor\";\n    }\n\n    start() {\n\n    }\n\n    set_color() {\n    }\n\n    render(ctx_x, ctx_y, scale) {\n        this.ctx.save();\n        this.ctx.beginPath();\n        this.ctx.lineWidth = 0;\n        this.ctx.rect(ctx_x * scale, ctx_y * scale, this.cube_side_len * scale, this.cube_side_len * scale);\n        this.ctx.fillStyle = this.fill_color;\n        this.ctx.fill();\n        this.ctx.restore();\n    }\n}\n","import { AcGameObject } from \"./AcGameObject\";\nimport { Floor } from \"./map_element/Floor\";\nimport { Grass } from \"./map_element/Grass\";\nimport { Grid } from \"./map_element/Grid\";\nimport { Wall } from \"./map_element/Wall\";\n\nexport class MultiGameMap extends AcGameObject {\n    constructor(playground, canvas) {\n        super();\n        this.playground = playground;\n        this.ctx = this.playground.ctx;\n        this.canvas = canvas;\n\n        this.width = this.playground.virtual_map_width;\n        this.height = this.playground.virtual_map_height;\n        this.cube_side_len = this.height * 0.05;  // 小方块边长\n        this.nx = Math.ceil(this.width / this.cube_side_len);  // 20\n        this.ny = Math.ceil(this.height / this.cube_side_len);  // 20\n\n        this.grids = [];\n        this.wall_img = new Image();\n        this.wall_img.src = \"https://s3.bmp.ovh/imgs/2021/11/837412e46f4f61a6.jpg\";\n        this.background_color = \"gray\";\n        this.stroke_color = \"rgb(222, 237, 225)\";\n    }\n\n    start() {\n        this.load_map();\n\n        this.generate_grid();\n        // this.generate_grass();\n    }\n\n    get_random_color() {\n        let colors = ['#00FFFF', '#00FF7F', '#8A2BE2', '#CD2990', '#7FFF00', '#FFDAB9', '#FF6437', '#CD853F'];\n        return colors[Math.floor(Math.random() * 6)];\n    }\n\n    generate_grid() {\n        for (let i = 0; i < this.nx; i++) {\n            for (let j = 0; j < this.ny; j++) {\n                if (this.map[i][j] === 1) {\n                    this.grids.push(new Floor(this, this.playground, this.ctx, i, j, this.cube_side_len, this.stroke_color));\n                } else if (this.map[i][j] === 0) {\n                    this.grids.push(new Wall(this, this.playground, this.ctx, i, j, this.cube_side_len, this.stroke_color));\n                }\n            }\n        }\n    }\n\n    win() {\n\n    }\n\n    lose() {\n    }\n\n    restart() {\n    }\n\n    on_destroy() {\n        while (this.grids && this.grids.length > 0) {\n            this.grids[0].destroy();\n        }\n        this.grids = [];\n\n        console.log(\"game map destroy DONE\");\n    }\n\n    update() {\n        this.render();\n    }\n\n    render() {\n        this.ctx.fillStyle = this.background_color;\n        this.ctx.fillRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    }\n\n    load_map() {\n        this.map = [\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n            [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n            [0, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0],\n            [0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0],\n            [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n            [0, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0],\n            [0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0],\n            [0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0],\n            [0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0],\n            [0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0],\n            [0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0],\n            [0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0],\n            [0, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0],\n            [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n            [0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0],\n            [0, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0],\n            [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n            [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n        ];\n    }\n}","import { AcGameObject } from \"./AcGameObject\";\r\n\r\nexport class Particle extends AcGameObject {\r\n    constructor(playground, x, y, radius, vx, vy, color, speed, move_length) {\r\n        super();\r\n        this.playground = playground;\r\n        this.ctx = this.playground.ctx;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.radius = radius;\r\n        this.vx = vx;\r\n        this.vy = vy;\r\n        this.color = color;\r\n        this.speed = speed;\r\n        this.move_length = move_length;\r\n\r\n        this.friction = 0.9;\r\n        this.eps = 0.001;\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    update() {\r\n        if (this.move_length < this.eps || this.speed < this.eps) {\r\n            this.destroy();\r\n            return false;\r\n        }\r\n\r\n        let moved = Math.min(this.move_length, this.speed * this.timedelta / 1000);\r\n        this.x += this.vx * moved;\r\n        this.y += this.vy * moved;\r\n        this.move_length -= moved;\r\n        this.speed *= this.friction;\r\n\r\n        this.render();\r\n    }\r\n\r\n    render() {\r\n        let scale = this.playground.scale;\r\n        let ctx_x = this.playground.my_calculate_relative_position_x(this.x);\r\n        let ctx_y = this.playground.my_calculate_relative_position_y(this.y);\r\n\r\n        this.ctx.beginPath();\r\n        this.ctx.arc(ctx_x * scale, ctx_y * scale, this.radius * scale, 0, Math.PI * 2, false);\r\n        this.ctx.fillStyle = this.color;\r\n        this.ctx.fill();\r\n    }\r\n}","import { AcGameObject } from \"../AcGameObject\";\r\n\r\nexport class FireBall extends AcGameObject {\r\n    constructor(playground, player, x, y, radius, vx, vy, color, speed, move_length, damage) {\r\n        super();\r\n        this.playground = playground;\r\n        this.player = player;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.vx = vx;\r\n        this.vy = vy;\r\n        this.radius = radius;\r\n        this.color = color;\r\n        this.speed = speed * 2;\r\n        this.move_length = move_length;\r\n        this.damage = damage;\r\n\r\n        this.eps = 0.001;\r\n        this.ctx = this.playground.ctx;\r\n\r\n        this.cons_flag = true;\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    update() {\r\n        if (this.move_length < this.eps) {\r\n            this.destroy();\r\n            return false;\r\n        }\r\n\r\n        this.update_move();\r\n        // 只有自己窗口发射的炮弹才判断碰撞\r\n        if (this.player.character !== \"enemy\") {\r\n            this.update_attack();\r\n        }\r\n\r\n        this.render();\r\n    }\r\n\r\n    update_move() {\r\n        let moved = Math.min(this.move_length, this.speed * this.timedelta / 1000);\r\n        this.x += this.vx * moved;\r\n        this.y += this.vy * moved;\r\n        this.move_length -= moved;\r\n    }\r\n\r\n    update_attack() {\r\n        for (let i = 0; i < this.playground.players.length; i++) {\r\n            let player = this.playground.players[i];\r\n            if (this.player !== player && this.is_collision(player)) {\r\n                this.attack(player);\r\n            }\r\n        }\r\n    }\r\n\r\n    get_dist(x1, y1, x2, y2) {\r\n        let dx = x1 - x2;\r\n        let dy = y1 - y2;\r\n        return Math.sqrt(dx * dx + dy * dy);\r\n    }\r\n\r\n    is_collision(player) {\r\n        let distance = this.get_dist(this.x, this.y, player.x, player.y);\r\n        if (distance < this.radius + player.radius) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    attack(player) {\r\n        let angle = Math.atan2(player.y - this.y, player.x - this.x);\r\n        let flag = player.is_attacked(angle, this.damage);\r\n\r\n        // 调用广播函数\r\n        if (this.playground.store.state.game_mode === \"multi mode\") {\r\n            this.playground.mps.send_fireball_attack(player.uuid, player.x, player.y, angle, this.damage, this.uuid);\r\n        }\r\n\r\n        // 如果返回值是true，说明被攻击者死亡\r\n        if (flag) {\r\n            this.player.level_up();\r\n            console.log(\"LEVEL UP: \", this.player.level);\r\n            // 调用广播函数\r\n            if (this.playground.store.state.game_mode === \"multi mode\") {\r\n                // TODO：当本地被攻击者死亡的时候，在多人模式下，可能对方刚好释放了治疗术，没有死\r\n                // 为了保持一致，需要发送一个死亡同步函数，告诉对方他已经死了\r\n            }\r\n        }\r\n\r\n        this.destroy();\r\n    }\r\n\r\n    // 在删除自己的时候要把所有的引用也删掉\r\n    on_destroy() {\r\n        for (let i = 0; i < this.playground.fireballs.length; i++) {\r\n            if (this.playground.fireballs[i] === this) {\r\n                this.playground.fireballs.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let scale = this.playground.scale;\r\n        let ctx_x = this.playground.my_calculate_relative_position_x(this.x);\r\n        let ctx_y = this.playground.my_calculate_relative_position_y(this.y);\r\n        // 处于屏幕范围外，则不渲染\r\n        if (this.playground.is_element_out_of_screen(ctx_x, ctx_y)) {\r\n            return;\r\n        }\r\n\r\n        this.ctx.beginPath();\r\n        this.ctx.arc(ctx_x * scale, ctx_y * scale, this.radius * scale, 0, Math.PI * 2, false);\r\n        this.ctx.fillStyle = this.color;\r\n        this.ctx.fill();\r\n    }\r\n}","import { AcGameObject } from \"../AcGameObject\";\n\nexport class HealthBar extends AcGameObject {\n    constructor(playground, player) {\n        super();\n        this.playground = playground;\n        this.ctx = this.playground.ctx;\n        this.player = player;\n        this.half_line = this.player.radius * 1.2;\n        this.botton_on_player = this.player.radius * 1.35;\n        this.x = this.player.x;\n        this.y = this.player.y;\n        this.background_color = \"grey\";\n        this.color = null;\n\n        this.eps = 0.01;\n    }\n\n    start() {\n        if (this.player.character === \"robot\" || this.player.character === \"enemy\") {\n            this.color = \"red\";\n        } else if (this.player.character === \"me\") {\n            this.color = \"lightgreen\";\n        } else {\n            this.color = \"yellow\";\n        }\n    }\n\n    player_component_update() {\n        this.x = this.player.x;\n        this.y = this.player.y;\n\n        if (this.playground.store.state.game_state === \"fighting\") {\n            this.render();\n        }\n    }\n\n    render() {\n        let scale = this.playground.scale;\n        let ctx_x = this.playground.my_calculate_relative_position_x(this.x);\n        let ctx_y = this.playground.my_calculate_relative_position_y(this.y);\n\n        if (this.playground.is_element_out_of_screen(ctx_x, ctx_y)) {\n            return;\n        }\n\n        this.ctx.beginPath();\n        this.ctx.moveTo((ctx_x - this.half_line * 1.13) * scale, (ctx_y - this.botton_on_player) * scale);\n        this.ctx.lineTo((ctx_x + this.half_line * 1.13) * scale, (ctx_y - this.botton_on_player) * scale);\n        this.ctx.lineWidth = 11;\n        this.ctx.strokeStyle = \"black\";\n        this.ctx.stroke();\n\n        this.ctx.beginPath();\n        this.ctx.moveTo((ctx_x - this.half_line * 1.1) * scale, (ctx_y - this.botton_on_player) * scale);\n        this.ctx.lineTo((ctx_x + this.half_line * 1.1) * scale, (ctx_y - this.botton_on_player) * scale);\n        this.ctx.lineWidth = 9;\n        this.ctx.strokeStyle = this.background_color;\n        this.ctx.stroke();\n\n        this.ctx.beginPath();\n        this.ctx.moveTo((ctx_x - this.half_line) * scale, (ctx_y - this.botton_on_player) * scale);\n        this.ctx.lineTo((ctx_x + (this.half_line * 2 * this.player.health / 100 - this.half_line)) * scale, (ctx_y - this.botton_on_player) * scale);\n        this.ctx.lineWidth = 5;\n        this.ctx.strokeStyle = this.color;\n        this.ctx.stroke();\n\n        this.ctx.strokeStyle = \"black\";\n        this.ctx.lineWidth = 1;\n    }\n}","import { AcGameObject } from \"../AcGameObject\";\r\n\r\n// 技能基类\r\nexport class Skill extends AcGameObject {\r\n    constructor(playground, player, icon_x, icon_y, icon_r) {\r\n        super();\r\n        this.playground = playground;\r\n        this.ctx = this.playground.ctx;\r\n        this.player = player;\r\n        this.icon_x = icon_x;\r\n        this.icon_y = icon_y;\r\n        this.icon_r = icon_r;\r\n\r\n        this.name = \"Skill\";\r\n        this.base_cold_time = 0;  // 冷却时间，单位：秒\r\n        this.cold_time = this.base_cold_time;\r\n        this.img = new Image();\r\n\r\n        this.eps = 0.001;\r\n    }\r\n\r\n    use_skill() {\r\n\r\n    }\r\n\r\n    receive_use_skill() {\r\n\r\n    }\r\n\r\n    late_late_update() {\r\n        this.update_code_time();\r\n        if (this.player.character === \"me\") {\r\n            this.render_icon();\r\n        }\r\n        this.render();\r\n    }\r\n\r\n    update_code_time() {\r\n        this.cold_time -= this.timedelta / 1000;\r\n        this.cold_time = Math.max(this.cold_time, 0);\r\n    }\r\n\r\n    render() {\r\n\r\n    }\r\n\r\n    render_icon() {\r\n        let scale = this.playground.scale;\r\n\r\n        // 绘制技能图片\r\n        this.ctx.save();\r\n        this.ctx.beginPath();\r\n        this.ctx.arc(this.icon_x * scale, this.icon_y * scale, this.icon_r * scale, 0, Math.PI * 2, false);\r\n        this.ctx.stroke();\r\n        this.ctx.clip();\r\n        this.ctx.drawImage(this.img, (this.icon_x - this.icon_r) * scale, (this.icon_y - this.icon_r) * scale, this.icon_r * 2 * scale, this.icon_r * 2 * scale);\r\n        this.ctx.restore();\r\n        // 绘制蒙板\r\n        if (this.cold_time > 0) {\r\n            this.ctx.beginPath();\r\n            this.ctx.moveTo(this.icon_x * scale, this.icon_y * scale);\r\n            this.ctx.arc(this.icon_x * scale, this.icon_y * scale, this.icon_r * scale, 0 - Math.PI / 2, Math.PI * 2 * (1 - this.cold_time / this.base_cold_time) - Math.PI / 2, true);\r\n            this.ctx.lineTo(this.icon_x * scale, this.icon_y * scale);\r\n            this.ctx.fillStyle = \"rgba(0, 0, 255, 0.5)\";\r\n            this.ctx.fill();\r\n        }\r\n    }\r\n}","import { FireBall } from \"./FireBall\";\nimport { Skill } from \"./Skill\";\n\nexport class FireBallSkill extends Skill {\n    constructor(playground, player, icon_x, icon_y, icon_r) {\n        super(playground, player, icon_x, icon_y, icon_r);\n\n        this.name = \"FireBall\";\n        this.base_cold_time = 1;  // 冷却时间，单位：秒\n        this.cold_time = this.base_cold_time;\n        this.img.src = \"https://cdn.acwing.com/media/article/image/2021/12/02/1_9340c86053-fireball.png\";\n    }\n\n    use_skill(tx, ty) {\n        // 只有当火球不在CD才会成功发射\n        if (this.cold_time < this.eps) {\n            let fireball = this.shoot_fireball(tx, ty);\n            this.cold_time = this.base_cold_time;\n\n            if (this.player.character === \"me\" && this.playground.store.state.game_mode === \"multi mode\") {\n                let skill_data = {\n                    \"ball_uuid\": fireball.uuid,\n                    \"tx\": tx,\n                    \"ty\": ty,\n                };\n                this.playground.mps.send_use_general_skill(skill_data);\n            }\n        }\n    }\n\n    receive_use_skill(skill_data) {\n        let fireball = this.shoot_fireball(skill_data[\"tx\"], skill_data[\"ty\"]);\n        fireball.uuid = skill_data[\"ball_uuid\"];\n    }\n\n    shoot_fireball(tx, ty) {\n        let radius = this.playground.height * 0.01 / this.playground.scale;\n        let angle = Math.atan2(ty - this.player.y, tx - this.player.x);\n        let vx = Math.cos(angle), vy = Math.sin(angle);\n        let color = \"red\";\n        let speed = this.playground.height * 0.5 / this.playground.scale;\n        let move_length = this.playground.height * 1.5 / this.playground.scale;\n        let fireball = null;\n        if (this.player.character === \"me\") {\n            fireball = new FireBall(this.playground, this.player, this.player.x, this.player.y, radius, vx, vy, color, speed, move_length, 50);\n        } else {\n            fireball = new FireBall(this.playground, this.player, this.player.x, this.player.y, radius, vx, vy, color, speed, move_length, 10);\n        }\n        this.playground.fireballs.push(fireball);\n\n        return fireball;\n    }\n}","import { Skill } from \"./Skill\";\n\nexport class BlinkSkill extends Skill {\n    constructor(playground, player, icon_x, icon_y, icon_r) {\n        super(playground, player, icon_x, icon_y, icon_r);\n\n        this.name = \"Blink\";\n        this.base_cold_time = 3;  // 冷却时间，单位：秒\n        this.cold_time = this.base_cold_time;\n        this.img.src = \"https://cdn.acwing.com/media/article/image/2021/12/02/1_daccabdc53-blink.png\";\n    }\n\n    use_skill(tx, ty) {\n        if (this.cold_time < this.eps) {\n            this.blink(tx, ty);\n            this.cold_time = this.base_cold_time;\n\n            if (this.playground.store.state.game_mode === \"multi mode\") {\n                let skill_data = {\n                    \"tx\": tx,\n                    \"ty\": ty,\n                };\n                this.playground.mps.send_use_summoner_skill(skill_data);\n            }\n        }\n    }\n\n    receive_use_skill(skill_data) {\n        this.blink(skill_data[\"tx\"], skill_data[\"ty\"]);\n    }\n\n    blink(tx, ty) {\n        let d = this.get_dist(this.player.x, this.player.y, tx, ty);\n        d = Math.min(d, 0.6);\n        let angle = Math.atan2(ty - this.player.y, tx - this.player.x);\n        this.player.x += d * Math.cos(angle);\n        this.player.y += d * Math.sin(angle);\n    }\n\n    // 计算两点间欧几里得距离\n    get_dist(x1, y1, x2, y2) {\n        let dx = x1 - x2;\n        let dy = y1 - y2;\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n}","import { Skill } from \"./Skill\";\n\nexport class ShieldSkill extends Skill {\n    constructor(playground, player, icon_x, icon_y, icon_r) {\n        super(playground, player, icon_x, icon_y, icon_r);\n\n        this.name = \"Shield\";\n        this.base_cold_time = 2;  // 冷却时间，单位：秒\n        this.cold_time = this.base_cold_time;\n        this.shield_radius = this.player.radius * 2;\n        this.img.src = \"https://tank-war-static.oss-cn-hangzhou.aliyuncs.com/BattleOfBalls/skill/shield.jfif\";\n        this.color = \"rgb(158,55,155)\";\n        this.base_duration_time = 3;\n        this.duration_time = 0;  // 护盾持续时间\n    }\n\n    use_skill() {\n        if (this.cold_time < this.eps) {\n            this.generate_shield();\n            this.cold_time = this.base_cold_time;\n\n            if (this.playground.store.state.game_mode === \"multi mode\") {\n                let skill_data = {};\n                this.playground.mps.send_use_awakened_skill(skill_data);\n            }\n        }\n    }\n\n    receive_use_skill(skill_data) {\n        this.generate_shield();\n    }\n\n    generate_shield() {\n        this.duration_time = this.base_duration_time;\n    }\n\n    render() {\n        if (this.duration_time <= this.eps) {\n            this.duration_time = 0;\n            return false;\n        }\n        let scale = this.playground.scale;\n        let ctx_x = this.playground.my_calculate_relative_position_x(this.player.x);\n        let ctx_y = this.playground.my_calculate_relative_position_y(this.player.y);\n\n        this.ctx.beginPath();\n        this.ctx.arc(ctx_x * scale, ctx_y * scale, this.shield_radius * scale, 0, Math.PI * 2, false);\n        this.ctx.lineWidth = 2;\n        this.ctx.strokeStyle = this.color;\n        this.ctx.stroke();\n    }\n\n    update() {\n        this.update_duration_time();\n        this.update_destroy_ball();\n    }\n\n    update_duration_time() {\n        this.duration_time -= this.timedelta / 1000;\n        this.duration_time = Math.max(0, this.duration_time);\n    }\n\n    update_destroy_ball() {\n        if (this.duration_time < this.eps) {\n            return;\n        }\n        for (let fireball of this.playground.fireballs) {\n            if (fireball.player !== this.player && this.is_collision(fireball)) {\n                fireball.destroy();\n            }\n        }\n    }\n\n    is_collision(ball) {\n        if (this.get_dist(this.player.x, this.player.y, ball.x, ball.y) <= this.shield_radius + ball.radius) {\n            return true;\n        }\n        return false;\n    }\n\n    get_dist(x1, y1, x2, y2) {\n        let dx = x1 - x2;\n        let dy = y1 - y2;\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n}","import { AcGameObject } from \"../AcGameObject\";\n\nexport class Arrow extends AcGameObject {\n    constructor(playground, player, max_length) {\n        super();\n        this.playground = playground;\n        this.ctx = this.playground.ctx;\n        this.player = player;\n        this.max_length = max_length;\n        this.angle = 0;\n\n        this.x = this.player.x;\n        this.y = this.player.y;\n\n        this.eps = 0.01;\n    }\n\n    start() {\n        if (this.player.character === \"robot\" || this.player.character === \"enemy\") {\n            this.color = \"red\";\n        } else if (this.player.character === \"me\") {\n            this.color = \"lightgreen\";\n        } else {\n            this.color = \"yellow\";\n        }\n    }\n\n    late_update() {\n        let scale = this.playground.scale;\n        let ctx_x = this.playground.my_calculate_relative_position_x(this.player.x);\n        let ctx_y = this.playground.my_calculate_relative_position_y(this.player.y);\n        let ctx_tx = this.playground.my_calculate_relative_position_x(this.player.tx);\n        let ctx_ty = this.playground.my_calculate_relative_position_y(this.player.ty);\n\n        if (this.playground.store.state.game_state === \"fighting\") {\n            this.render(scale, ctx_x, ctx_y, ctx_tx, ctx_ty);\n        }\n    }\n\n    render(scale, ctx_x, ctx_y, ctx_tx, ctx_ty) {\n        if (this.playground.is_element_out_of_screen(ctx_x, ctx_y)) {\n            return;\n        }\n\n        this.angle = Math.atan2(ctx_ty * scale - ctx_y * scale, ctx_tx * scale - ctx_x * scale);\n        this.drawArrow(this.ctx, ctx_x * scale, ctx_y * scale, ctx_tx * scale, ctx_ty * scale, 30, this.player.radius * scale, this.player.radius * 0.2 * scale, 'yellow');\n\n        this.ctx.strokeStyle = \"black\";\n        this.ctx.lineWidth = 1;\n    }\n\n    drawArrow(ctx, fromX, fromY, toX, toY, theta, headlen, width, color) {\n        theta = typeof (theta) != 'undefined' ? theta : 30;\n        headlen = typeof (theta) != 'undefined' ? headlen : 10;\n        width = typeof (width) != 'undefined' ? width : 1;\n        color = typeof (color) != 'color' ? color : '#000';\n\n        // 计算各角度和对应的P2,P3坐标\n        var angle = Math.atan2(fromY - toY, fromX - toX) * 180 / Math.PI,\n            angle1 = (angle + theta) * Math.PI / 180,\n            angle2 = (angle - theta) * Math.PI / 180,\n            topX = headlen * Math.cos(angle1),\n            topY = headlen * Math.sin(angle1),\n            botX = headlen * Math.cos(angle2),\n            botY = headlen * Math.sin(angle2);\n\n\n        ctx.save();\n        ctx.beginPath();\n\n        var arrowX = fromX - topX,\n            arrowY = fromY - topY;\n\n        ctx.moveTo(arrowX, arrowY);\n        ctx.moveTo(fromX, fromY);\n        ctx.lineTo(toX, toY);\n        arrowX = toX + topX;\n        arrowY = toY + topY;\n        ctx.moveTo(arrowX, arrowY);\n        ctx.lineTo(toX, toY);\n        arrowX = toX + botX;\n        arrowY = toY + botY;\n        ctx.lineTo(arrowX, arrowY);\n        ctx.strokeStyle = color;\n        ctx.lineWidth = width;\n        ctx.stroke();\n        ctx.restore();\n    }\n}","import { isMemoSame, readonly } from \"vue\";\r\nimport { routeLocationKey } from \"vue-router\";\r\nimport { AcGameObject } from \"../AcGameObject\";\r\nimport { Particle } from \"../Particle\";\r\nimport { FireBall } from \"../skill/FireBall\";\r\nimport { HealthBar } from \"../player_component/HealthBar\";\r\nimport { FireBallSkill } from \"../skill/FireBallSkill\";\r\nimport { BlinkSkill } from \"../skill/BlinkSkill\";\r\nimport { ShieldSkill } from \"../skill/ShieldSkill\";\r\nimport heros_info from \"../../../../../static/HeroInfo.json\"\r\nimport { Arrow } from \"../player_component/Arrow\";\r\nimport { timePanelSharedProps } from \"element-plus/es/components/time-picker/src/props/shared\";\r\n\r\nexport class Player extends AcGameObject {\r\n    constructor(playground, x, y, radius, color, speed, character, username, photo) {\r\n        super();\r\n        this.playground = playground;\r\n        this.ctx = this.playground.ctx;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.vx = 0;\r\n        this.vy = 0;\r\n        this.base_radis = radius;\r\n        this.radius = this.base_radis;\r\n        this.color = color;\r\n        this.base_speed = speed;\r\n        this.speed = 0;\r\n        this.speed_angle = 0;  // 速度角度，弧度制，用于控制玩家移动方向，在检测到碰撞的时候用于计算新的速度向量\r\n        this.character = character;\r\n        this.username = username;\r\n        this.photo = photo;\r\n        this.decelerate_ratio = 0;  // 减速比例\r\n\r\n        this.hero_name = \"Player\";\r\n        this.base_health = 100;\r\n        this.health = this.base_health;\r\n        this.level = 1;  // 角色等级\r\n        // 角色状态：\r\n        // normal  displacement  vertigo  silent  poisoning  transformation\r\n        // 正常     位移          眩晕     沉默    中毒        变身\r\n        this.state = \"normal\";\r\n        this.eps = 0.001;\r\n        this.directions = new Set();  // 用户的操作列表\r\n        this.last_directions_size = 0;  // 操作列表的长度（每当directions长度更改的时候向后端发送数据，长度不变就不发送，降低服务器压力）\r\n        this.skill_directions = new Set();  // 用户的技能操作列表\r\n        this.last_skill_directions_size = 0;\r\n        this.cur_skill = null;\r\n        this.rand_directions = new Set();  // 给机器人用的随机操作列表\r\n        this.tx = 0;  // 鼠标的实时位置\r\n        this.ty = 0;\r\n        this.friction = 0.9;  // 摩擦力\r\n        this.spent_time = 0;\r\n        this.last_clientX = 0;  // 暂存e.clientX和e.clientY，用于在鼠标不动的时候也能更新相对位置\r\n        this.last_clientY = 0;\r\n        this.last_rect_left = 0;\r\n        this.last_rect_top = 0;  // 暂存rect.left和rect.top，用于计算AcWingOS小窗模式的鼠标位置\r\n\r\n        this.general_skill = new FireBallSkill(this.playground, this, 0.6, 0.9, 0.04);  // 英雄普攻\r\n        this.awakened_skill = new ShieldSkill(this.playground, this, 0.8, 0.9, 0.04);  // 英雄觉醒技能\r\n        this.summoner_skill = new BlinkSkill(this.playground, this, 1.0, 0.9, 0.04);  // 召唤师技能\r\n        this.health_bar = new HealthBar(this.playground, this);\r\n        if (this.character === \"me\") {\r\n            this.arrow = new Arrow(this.playground, this, 1);\r\n        }\r\n    }\r\n\r\n    start() {\r\n        if (this.playground.store.state.game_mode === \"multi mode\") {\r\n            this.playground.notice_board.add();\r\n            if (this.playground.notice_board.player_count >= 3) {\r\n                this.playground.store.commit('updateGameState', \"fighting\");\r\n                this.playground.notice_board.write(\"Fighting\");\r\n            }\r\n        }\r\n\r\n        this.ctx.canvas.focus();\r\n\r\n        if (this.character !== \"robot\") {\r\n            this.load_image();\r\n        }\r\n\r\n        // 机器人的运动和玩家的不一样，玩家是通过键盘操作指定移动方向，机器人是直线移动到随机的坐标点\r\n        if (this.character === \"me\") {\r\n            this.add_listening_events();\r\n            console.log(\"Hero Name:\", this.hero_name);\r\n        } else if (this.character === \"robot\") {\r\n            this.move_length = 0;\r\n            this.speed = this.get_speed();\r\n            this.robot_update();\r\n\r\n            // 机器人使用的移动方法是随机一个目的地坐标，方向向量集合暂时用不到\r\n            // for (let i = 0; i < 4; i++) {\r\n            //     // Math.round(Math.random())：随机生成0和1\r\n            //     this.rand_directions.add(Math.round(Math.random() * 4));\r\n            // }\r\n        }\r\n    }\r\n\r\n    level_up() {\r\n        this.level += 1;\r\n        this.health = this.base_health;\r\n    }\r\n\r\n    change_state(data) {\r\n        if (data[\"skill_name\"] === \"transformation\") {\r\n            this.transformation(data[\"transformation_radis_ratio\"]);\r\n        } else if (data[\"skill_name\"] === \"transformation_restore\") {\r\n            this.transformation_restore();\r\n        } else if (data[\"skill_name\"] === \"ice_arrow\") {\r\n            this.decelerate(data[\"decelerate_ratio\"], data[\"time\"]);\r\n\r\n            console.log(\"DECELERATE:\", this.decelerate_ratio);\r\n        }\r\n    }\r\n\r\n    get_speed() {\r\n        return this.base_speed * (1 - this.decelerate_ratio);\r\n    }\r\n\r\n    change_decelerate_ratio(decelerate_ratio, info) {\r\n        // 有些技能，比如“寒冰箭”，的减速效果是叠加的，使用info参数来判断是直接修改减速比例还是叠加减速比例\r\n        if (info && info === \"add\") {\r\n            this.decelerate_ratio += decelerate_ratio;\r\n        } else {\r\n            this.decelerate_ratio = decelerate_ratio;\r\n        }\r\n        if (this.speed > this.eps) {\r\n            this.speed = this.get_speed();\r\n        }\r\n    }\r\n\r\n    // 寒冰箭的减速控制函数，减速比例是叠加的\r\n    decelerate(decelerate_ratio, time) {\r\n        let outer = this;\r\n        if (this.decelerate_id) {\r\n            clearTimeout(this.decelerate_id);\r\n        }\r\n\r\n        if (this.decelerate_ratio < 1) {\r\n            this.change_decelerate_ratio(decelerate_ratio, \"add\");\r\n        }\r\n        if (this.decelerate_ratio > 1) {\r\n            this.decelerate_ratio = 1;\r\n        }\r\n\r\n        console.log(\"time:\", time * 1000);\r\n\r\n        this.decelerate_id = setTimeout(function () {\r\n            outer.change_decelerate_ratio(0);\r\n            outer.decelerate_id = null;\r\n            // outer.speed = outer.get_speed();\r\n            console.log(\"restore speed\");\r\n        }, time * 1000);\r\n    }\r\n\r\n    // 被小耶的神奇魔术变成小熊\r\n    transformation(transformation_radis_ratios) {\r\n        this.state = \"transformation\";\r\n        this.radius = this.base_radis * transformation_radis_ratios;\r\n    }\r\n\r\n    // 神奇魔术持续时间结束，变回来\r\n    transformation_restore() {\r\n        this.state = \"normal\";\r\n        this.radius = this.base_radis;\r\n        this.change_decelerate_ratio(0);\r\n    }\r\n\r\n    load_image() {\r\n        this.img = new Image();\r\n        for (let hero_info of heros_info) {\r\n            if (hero_info.name === this.hero_name) {\r\n                this.img.src = hero_info.avatar;\r\n                break;\r\n            }\r\n        }\r\n        if (!this.img.src) {\r\n            this.img.src = this.photo;\r\n        }\r\n    }\r\n\r\n    add_listening_events() {\r\n        // 取消右键菜单功能\r\n        this.ctx.canvas.addEventListener('contextmenu', e => {\r\n            e.preventDefault();  // 取消默认行为\r\n        });\r\n\r\n        this.ctx.canvas.addEventListener('keydown', e => {\r\n            // console.log(\"in [player]\", e.key);\r\n            if (e.key === 'Enter') {\r\n                if (this.playground.store.state.game_mode === \"multi mode\") {\r\n                    this.playground.chat_field.show_input();\r\n                }\r\n                e.preventDefault();\r\n            } else if (e.key === 'Escape') {\r\n                if (this.playground.store.state.game_mode === \"multi mode\") {\r\n                    this.playground.chat_field.hide_input();\r\n                }\r\n                e.preventDefault();\r\n            }\r\n\r\n            // 非对战状态无法进行操作\r\n            if (this.playground.store.state.game_state !== \"fighting\") {\r\n                return true;\r\n            }\r\n            // 操作方式：wasd / 上下左右\r\n            if (e.key === 'w' || e.key === 'W' || e.key === 'ArrowUp') {\r\n                // 保证不会重复输入，后面的delete只是保险起见\r\n                this.directions.add(0);\r\n                e.preventDefault();  // 取消默认行为\r\n            } else if (e.key === 'd' || e.key === 'D' || e.key === 'ArrowRight') {\r\n                this.directions.add(1);\r\n                e.preventDefault();  // 取消默认行为\r\n            } else if (e.key === 's' || e.key === 'S' || e.key === 'ArrowDown') {\r\n                this.directions.add(2);\r\n                e.preventDefault();  // 取消默认行为\r\n            } else if (e.key === 'a' || e.key === 'A' || e.key === 'ArrowLeft') {\r\n                this.directions.add(3);\r\n                e.preventDefault();  // 取消默认行为\r\n            } else if (e.key === 'f' || e.key === 'F') {\r\n                this.cur_skill = this.cur_skill === \"summoner_skill\" ? null : \"summoner_skill\";\r\n            } else if (e.key === ' ') {\r\n                this.awakened_skill.use_skill(this.tx, this.ty);\r\n            }\r\n\r\n            this.update_move_toward();\r\n        });\r\n\r\n        this.ctx.canvas.addEventListener('keyup', e => {\r\n            if (e.key === 'w' || e.key === 'W' || e.key === 'ArrowUp') {\r\n                this.directions.delete(0);\r\n                e.preventDefault();  // 取消默认行为\r\n            } else if (e.key === 'd' || e.key === 'D' || e.key === 'ArrowRight') {\r\n                this.directions.delete(1);\r\n                e.preventDefault();  // 取消默认行为\r\n            } else if (e.key === 's' || e.key === 'S' || e.key === 'ArrowDown') {\r\n                this.directions.delete(2);\r\n                e.preventDefault();  // 取消默认行为\r\n            } else if (e.key === 'a' || e.key === 'A' || e.key === 'ArrowLeft') {\r\n                this.directions.delete(3);\r\n                e.preventDefault();  // 取消默认行为\r\n            }\r\n            this.update_move_toward();\r\n        });\r\n\r\n        this.ctx.canvas.addEventListener('mousedown', e => {\r\n            // 非对战状态无法进行操作\r\n            if (this.playground.store.state.game_state !== \"fighting\") {\r\n                return false;\r\n            }\r\n            this.save_clientX_clientY_rectLeft_rectRight(e);\r\n            // 鼠标左键·\r\n            if (e.which === 1) {\r\n                this.my_calculate_tx_ty();\r\n                if (this.cur_skill === null) {\r\n                    this.use_general_skill();\r\n                    this.skill_directions.add(\"general_skill\");\r\n                } else if (this.cur_skill === \"summoner_skill\") {\r\n                    this.use_summoner_skill();\r\n                    this.cur_skill = null;\r\n                }\r\n                // 鼠标点击在地图外面将无效\r\n                // if (this.tx < 0 || this.tx > this.playground.virtual_map_width || this.ty < 0 || this.ty > this.playground.virtual_map_height) {\r\n                //     return ;\r\n                // }\r\n            }\r\n            e.preventDefault();\r\n        });\r\n\r\n        this.ctx.canvas.addEventListener('mouseup', e => {\r\n            this.save_clientX_clientY_rectLeft_rectRight(e);\r\n            this.skill_directions.delete(\"general_skill\");\r\n            e.preventDefault();\r\n        })\r\n\r\n        // 鼠标移动的时候重新计算绝对位置\r\n        // （但是这会产生一个bug：鼠标不动玩家移动会造成攻击位置错误，所以在需要攻击的时候也要重新计算）\r\n        this.ctx.canvas.addEventListener('mousemove', e => {\r\n            this.save_clientX_clientY_rectLeft_rectRight(e);\r\n        })\r\n    }\r\n\r\n    use_general_skill() {\r\n        // 部分状态无法使用技能\r\n        if (this.state === \"transformation\" || this.state === \"silent\" || this.state === \"vertigo\") {\r\n            return;\r\n        }\r\n        this.general_skill.use_skill(this.tx, this.ty);\r\n    }\r\n\r\n    use_summoner_skill() {\r\n        // 部分状态无法使用技能\r\n        if (this.state === \"transformation\" || this.state === \"silent\" || this.state === \"vertigo\") {\r\n            return;\r\n        }\r\n        this.summoner_skill.use_skill(this.tx, this.ty);\r\n    }\r\n\r\n    // 根据uuid来删除火球\r\n    destroy_fireball(uuid) {\r\n        for (let i = 0; i < this.playground.fireballs.length; i++) {\r\n            let fireball = this.playground.fireballs[i];\r\n            if (fireball.uuid === uuid) {\r\n                fireball.destroy();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    scan_skills(directions) {\r\n        if (directions.has(\"general_skill\")) {\r\n            this.use_general_skill();\r\n        }\r\n    }\r\n\r\n    // 将监听事件里的位置临时变量存储到玩家的类中，用于后续计算\r\n    save_clientX_clientY_rectLeft_rectRight(e) {\r\n        this.last_clientX = e.clientX;\r\n        this.last_clientY = e.clientY;\r\n    }\r\n\r\n    // 使用监听事件里的相对坐标计算在虚拟地图中的绝对坐标\r\n    my_calculate_tx_ty() {\r\n        // 获取canvas左上角在整个屏幕上的坐标（主要用在acapp小窗口上，WEB端canvas左上角就是屏幕左上角）\r\n        const rect = this.ctx.canvas.getBoundingClientRect();\r\n        this.last_rect_left = rect.left;\r\n        this.last_rect_top = rect.top;\r\n        this.tx = this.playground.my_calculate_tx(this.last_clientX - this.last_rect_left);\r\n        this.ty = this.playground.my_calculate_ty(this.last_clientY - this.last_rect_top);\r\n    }\r\n\r\n    // 计算两点间欧几里得距离\r\n    get_dist(x1, y1, x2, y2) {\r\n        let dx = x1 - x2;\r\n        let dy = y1 - y2;\r\n        return Math.sqrt(dx * dx + dy * dy);\r\n    }\r\n\r\n    update_speed_angle(directions) {\r\n        // 根据操作数组来计算速度角度\r\n        this.speed = this.get_speed();\r\n        if (directions.size === 1 || directions.size === 3) {\r\n            if (directions.has(0) && !directions.has(2))\r\n                this.speed_angle = -Math.PI / 2;\r\n            else if (directions.has(1) && !directions.has(3))\r\n                this.speed_angle = 0;\r\n            else if (directions.has(2) && !directions.has(0))\r\n                this.speed_angle = Math.PI / 2;\r\n            else if (directions.has(3) && !directions.has(1))\r\n                this.speed_angle = Math.PI;\r\n        } else if (directions.size === 2) {\r\n            if (directions.has(0) && directions.has(1))\r\n                this.speed_angle = -Math.PI / 4;\r\n            else if (directions.has(1) && directions.has(2))\r\n                this.speed_angle = Math.PI / 4;\r\n            else if (directions.has(2) && directions.has(3))\r\n                this.speed_angle = Math.PI * 3 / 4;\r\n            else if (directions.has(3) && directions.has(0))\r\n                this.speed_angle = -Math.PI * 3 / 4;\r\n        } else {\r\n            this.speed = 0;\r\n        }\r\n    }\r\n\r\n    // 玩家被攻击（伤害角度暂时用不到）\r\n    is_attacked(angle, damage) {\r\n        for (let i = 0; i < 15 + Math.random() * 10; i++) {\r\n            let radius = this.radius * Math.random() * 0.1;\r\n            let angle = Math.PI * 2 * Math.random();\r\n            let vx = Math.cos(angle), vy = Math.sin(angle);\r\n            let color = this.color;\r\n            let speed = this.speed * 4;  // 控制粒子的射速（间接控制射程）\r\n            let move_length = this.radius * Math.random() * 5;  // 控制粒子射程\r\n            new Particle(this.playground, this.x, this.y, radius, vx, vy, color, speed, move_length);\r\n        }\r\n\r\n        this.health -= damage;\r\n        if (this.health <= 0) {\r\n            this.player_lose();\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    // 收到有人被攻击的广播（并不一定是窗口的主人被攻击）\r\n    receive_attack(x, y, angle, damage, attacker) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.is_attacked(angle, damage);\r\n    }\r\n\r\n    receive_fireball_attack(x, y, angle, damage, ball_uuid, attacker) {\r\n        attacker.destroy_fireball(ball_uuid);\r\n        this.x = x;\r\n        this.y = y;\r\n        this.is_attacked(angle, damage);\r\n    }\r\n\r\n    player_lose() {\r\n        // 死一个新加入一个\r\n        if (this.character === \"me\") {\r\n            // 这里必须判断是否对战状态，因为胜利之后点击确定也会删除自己\r\n            if (this.playground.store.state.game_state === \"fighting\") {\r\n                console.log(\"me LOST\");\r\n                this.playground.score_board.lose();\r\n            }\r\n        } else if (this.character === \"robot\") {\r\n            this.playground.append_player();\r\n        }\r\n\r\n        this.destroy();\r\n    }\r\n\r\n    on_destroy() {\r\n        if (this.health_bar) {\r\n            this.health_bar.destroy();\r\n        }\r\n        this.health_bar = null;\r\n\r\n        if (this.general_skill) {\r\n            this.general_skill.destroy();\r\n        }\r\n        this.general_skill = null;\r\n\r\n        if (this.awakened_skill) {\r\n            this.awakened_skill.destroy();\r\n        }\r\n        this.awakened_skill = null;\r\n\r\n        if (this.summoner_skill) {\r\n            this.summoner_skill.destroy();\r\n        }\r\n        this.summoner_skill = null;\r\n\r\n        for (let i = 0; i < this.playground.players.length; i++) {\r\n            if (this.playground.players[i] === this) {\r\n                this.playground.players.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    // 从directions中清除所有operation对应的操作（使用Set()之后就用不到了）\r\n    // from_directions_clean(directions, operation) {\r\n    //     for (let i = 0; i < directions.length; i++) {\r\n    //         if (directions[i] === operation) {\r\n    //             directions.splice(i, 1);\r\n    //             i--;\r\n    //         }\r\n    //     }\r\n    // }\r\n\r\n    robot_update() {\r\n        // “沉默”和“变身”不能使用技能\r\n        if (this.state !== \"silent\" && this.state !== \"transformation\") {\r\n            this.auto_use_general_skill();\r\n        }\r\n\r\n        // “位移”和“眩晕”不能移动\r\n        if (this.state !== \"displacement\" && this.state !== \"vertigo\") {\r\n            if (this.move_length < this.eps) {\r\n                this.move_length = 0;\r\n                this.vx = this.vy = 0;\r\n                // 机器人的运动永不停歇\r\n                let tx = Math.random() * this.playground.virtual_map_width;\r\n                let ty = Math.random() * this.playground.virtual_map_height;\r\n                this.move_to(tx, ty);\r\n            } else {\r\n                let moved = Math.min(this.move_length, this.speed * this.timedelta / 1000);\r\n                this.x += this.vx * moved;\r\n                this.y += this.vy * moved;\r\n                this.move_length -= moved;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    // 人机会自动使用普攻\r\n    auto_use_general_skill() {\r\n        let players = this.playground.players;\r\n\r\n        if (this.spent_time > 3 && Math.random() < 1 / 180.0 && players.length >= 2) {\r\n            let player = this;\r\n            for (let i = 0; player === this && i < 1000; i++) {\r\n                player = players[Math.floor(Math.random() * players.length)];\r\n            }\r\n            this.general_skill.use_skill(player.x, player.y);\r\n        }\r\n    }\r\n\r\n    move_to(tx, ty) {\r\n        this.move_length = this.get_dist(this.x, this.y, tx, ty);\r\n        this.speed_angle = Math.atan2(ty - this.y, tx - this.x);\r\n        // this.check_collision();\r\n        this.vx = Math.cos(this.speed_angle);\r\n        // robot的Y轴移动和player不同，player为了更加直观用的是角度方向\r\n        // 如Math.PI / 2这个角度就是向上移动，那么vy就是负数\r\n        // 而机器人在移动的时候还需要用到this.move_length，比player更加复杂，所以不能用this.update_move();代替\r\n        this.vy = Math.sin(this.speed_angle);\r\n    }\r\n\r\n    update_move() {\r\n        // “位移”和“眩晕”不能移动\r\n        if (this.state === \"displacement\" || this.state === \"vertigo\") {\r\n            return false;\r\n        }\r\n        this.vx = this.speed * Math.cos(this.speed_angle);\r\n        this.vy = this.speed * Math.sin(this.speed_angle);  // 这个负号很精髓\r\n        this.x += this.vx * this.timedelta / 1000;\r\n        this.y += this.vy * this.timedelta / 1000;\r\n    }\r\n\r\n    check_collision() {\r\n        let grids = this.playground.game_map.grids;\r\n        for (let i = 0; i < grids.length; i++) {\r\n            if (grids[i].character === \"wall\") {\r\n                let new_angle = grids[i].is_collision(this);\r\n                if (new_angle) {\r\n                    // this.speed_angle = new_angle;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    update_move_toward() {\r\n        // 只有当前操作数组的长度改变时才会调用里面的操作，下面技能数组同理\r\n        // 这么做是为了减少调用同步函数的次数，因为一直按着一个键会连续触发监听函数\r\n        if (this.last_directions_size !== this.directions.size) {\r\n            this.update_speed_angle(this.directions);\r\n            if (this.playground.store.state.game_mode === \"multi mode\") {\r\n                // *************************************************************************************\r\n                // 前后端传输消息的整个流程：\r\n                // 玩家在进行操作的时候首先判断当前是多人游戏模式，于是调用mps相应的函数\r\n                // mps的相关逻辑在multiplayer.js里，这会调用相应的send_move_toward函数开始向后端发送数据\r\n                // 其中'event'字段的作用就是为了在后端完成路由\r\n                // 后端用async def receive(self, text_data)函数对接收到的信息进行路由，跳转到对应的后端move_toward函数\r\n                // 后端move_toward函数会将消息广播给组里的所有人，其他人通过async def group_send_event(self, data)函数将信息发送给每个人对应的前端\r\n                // 前端在multiplayer.js里通过receive()函数的this.ws.onmessage接收后端发来的信息，并进行路由\r\n                // *************************************************************************************\r\n                this.playground.mps.send_move_toward(this.directions, this.x, this.y);\r\n            }\r\n\r\n            this.last_directions_size = this.directions.size;\r\n        }\r\n    }\r\n\r\n    update() {\r\n\r\n    }\r\n\r\n    late_update() {\r\n        this.spent_time += this.timedelta / 1000;\r\n\r\n        if (this.character === \"robot\") {\r\n            if (this.playground.store.state.game_state === \"fighting\") {\r\n                this.robot_update();\r\n            }\r\n            this.render();\r\n        }\r\n    }\r\n\r\n    late_late_update() {\r\n        if (this.character === \"robot\") {\r\n            return;\r\n        }\r\n\r\n        this.my_calculate_tx_ty();\r\n        if (this.playground.store.state.game_state === \"fighting\") {\r\n            // 只有当角色是自己并且游戏是对战状态才会检查胜利状态\r\n            if (this.character === \"me\") {\r\n                this.update_win();\r\n            }\r\n            this.update_move();\r\n            this.update_attack();\r\n        }\r\n        this.render();\r\n    }\r\n\r\n    update_win() {\r\n        if (this.playground.players.length === 1) {\r\n            this.playground.score_board.win();\r\n        }\r\n    }\r\n\r\n    update_attack() {\r\n        this.scan_skills(this.skill_directions);\r\n    }\r\n\r\n    render() {\r\n        // 把虚拟地图中的坐标换算成canvas中的坐标\r\n        let scale = this.playground.scale;\r\n        let ctx_x = this.playground.my_calculate_relative_position_x(this.x);\r\n        let ctx_y = this.playground.my_calculate_relative_position_y(this.y);\r\n\r\n        if (this.playground.is_element_out_of_screen(ctx_x, ctx_y)) {\r\n            if (this.character != \"me\") { // 一个隐藏的bug，如果是玩家自己并且return，会导致技能图标渲染不出来\r\n                return;\r\n            }\r\n        }\r\n\r\n        if (this.character !== \"robot\") {\r\n            this.ctx.save();\r\n            this.ctx.beginPath();\r\n            this.ctx.arc(ctx_x * scale, ctx_y * scale, this.radius * scale, 0, Math.PI * 2, false);\r\n            this.ctx.stroke();\r\n            this.ctx.clip();\r\n            this.ctx.drawImage(this.img, (ctx_x - this.radius) * scale, (ctx_y - this.radius) * scale, this.radius * 2 * scale, this.radius * 2 * scale);\r\n            this.ctx.restore();\r\n        } else {\r\n            this.ctx.beginPath();\r\n            this.ctx.arc(ctx_x * scale, ctx_y * scale, this.radius * scale, 0, Math.PI * 2, false);\r\n            this.ctx.fillStyle = this.color;\r\n            this.ctx.fill();\r\n        }\r\n    }\r\n}","import { FireBall } from \"./FireBall\";\nimport { Skill } from \"./Skill\";\n\nexport class RapidFireSkill extends Skill {\n    constructor(playground, player, icon_x, icon_y, icon_r) {\n        super(playground, player, icon_x, icon_y, icon_r);\n\n        this.owner = \"太二\";\n        this.name = \"RapidFireSkill\";\n        this.skill_type = \"general_skill\";\n        this.base_cold_time = 1;  // 冷却时间，单位：秒\n        this.cold_time = 0;\n\n        this.base_fire_interval = 0.3;  // 射击间隔，单位：秒\n        this.fire_interval = this.base_fire_interval;\n        this.base_bullet = 7;\n        this.bullet = this.base_bullet;  // 剩余子弹数量\n\n        this.scatter = 2;  // 散射量\n\n        this.img.src = \"https://project-static-file.oss-cn-hangzhou.aliyuncs.com/AwakenedAlliance/aoyi/taier/general_skill.png\";\n    }\n\n    start() {\n        this.fresh_cold_time();\n    }\n\n    fresh_cold_time() {\n        this.cold_time = 0;\n        this.fire_interval = 0;\n        this.bullet = this.base_bullet;\n    }\n\n    use_skill(tx, ty) {\n        // 只有当技能不在CD，并且不在射击间隔内，并且还有子弹时才会成功发射\n        if (this.cold_time < this.eps && this.fire_interval < this.eps && this.bullet > 0) {\n            let fireball_list = this.rapid_fire(tx, ty);\n            let ball_uuid_list = [];\n            for (let ball of fireball_list) {\n                ball_uuid_list.push(ball.uuid);\n            }\n            this.fire_interval = this.base_fire_interval;\n            this.bullet -= 1;\n\n            if (this.bullet <= 0) {\n                this.cold_time = this.base_cold_time;\n            }\n\n            if (this.player.character === \"me\" && this.playground.store.state.game_mode === \"multi mode\") {\n                let skill_data = {\n                    \"ball_uuid_list\": ball_uuid_list,\n                    \"tx\": tx,\n                    \"ty\": ty,\n                };\n                this.playground.mps.send_use_general_skill(skill_data);\n            }\n        }\n    }\n\n    update_code_time() {\n        this.cold_time -= this.timedelta / 1000;\n        this.cold_time = Math.max(this.cold_time, 0);\n\n        this.fire_interval -= this.timedelta / 1000;\n        this.fire_interval = Math.max(this.fire_interval, 0);\n\n        if (this.bullet === 0 && this.cold_time < this.eps) {\n            this.bullet = this.base_bullet;\n        }\n    }\n\n    rapid_fire(tx, ty) {\n        let delta_angle = Math.PI / 10;\n        let fireball_list = [];\n\n        if (this.scatter === 2) {\n            fireball_list.push(this.shoot_fireball(tx, ty, delta_angle / 2));\n            fireball_list.push(this.shoot_fireball(tx, ty, -delta_angle / 2));\n        } else if (this.scatter === 3) {\n            fireball_list.push(this.shoot_fireball(tx, ty, delta_angle));\n            fireball_list.push(this.shoot_fireball(tx, ty, 0));\n            fireball_list.push(this.shoot_fireball(tx, ty, -delta_angle));\n        } else if (this.scatter === 4) {\n            fireball_list.push(this.shoot_fireball(tx, ty, delta_angle / 2));\n            fireball_list.push(this.shoot_fireball(tx, ty, delta_angle * 1.5));\n            fireball_list.push(this.shoot_fireball(tx, ty, -delta_angle / 2));\n            fireball_list.push(this.shoot_fireball(tx, ty, -delta_angle * 1.5));\n        } else {\n            console.log(\"[SCATTER ERROR]\");\n        }\n\n        return fireball_list;\n    }\n\n    receive_use_skill(skill_data) {\n        let fireball_list = this.rapid_fire(skill_data[\"tx\"], skill_data[\"ty\"]);\n        let ball_uuid_list = skill_data[\"ball_uuid_list\"];\n\n        for (let i = 0; i < fireball_list.length; i++) {\n            fireball_list[i].uuid = ball_uuid_list[i].uuid;\n        }\n    }\n\n    shoot_fireball(tx, ty, delta_angle) {\n        let radius = this.playground.height * 0.01 / this.playground.scale;\n        let angle = Math.atan2(ty - this.player.y, tx - this.player.x);\n        angle += delta_angle;\n        let vx = Math.cos(angle), vy = Math.sin(angle);\n        let color = \"red\";\n        let speed = this.playground.height * 0.8 / this.playground.scale;\n        let move_length = this.playground.height * 0.4 / this.playground.scale;\n        let fireball = null;\n        if (this.player.character === \"me\") {\n            fireball = new FireBall(this.playground, this.player, this.player.x, this.player.y, radius, vx, vy, color, speed, move_length, 50);\n        } else {\n            fireball = new FireBall(this.playground, this.player, this.player.x, this.player.y, radius, vx, vy, color, speed, move_length, 10);\n        }\n        this.playground.fireballs.push(fireball);\n\n        return fireball;\n    }\n}","import { Skill } from \"./Skill\";\n\nexport class RollingSkill extends Skill {\n    constructor(playground, player, icon_x, icon_y, icon_r) {\n        super(playground, player, icon_x, icon_y, icon_r);\n\n        this.owner = \"太二\";\n        this.name = \"Rolling\";\n        this.skill_type = \"awakened_skill\";\n        this.base_cold_time = 1.8;  // 冷却时间，单位：秒\n        this.cold_time = this.base_cold_time;\n        this.img.src = \"https://project-static-file.oss-cn-hangzhou.aliyuncs.com/AwakenedAlliance/aoyi/taier/awakened_skill.png\";\n\n        this.speed = this.player.base_speed * 3;\n    }\n\n    use_skill() {\n        if (this.cold_time < this.eps) {\n            this.rolling();\n            this.cold_time = this.base_cold_time;\n\n            if (this.playground.store.state.game_mode === \"multi mode\") {\n                let skill_data = {\n                };\n                this.playground.mps.send_use_awakened_skill(skill_data);\n            }\n        }\n    }\n\n    receive_use_skill(skill_data) {\n        this.rolling();\n    }\n\n    update_move() {\n        if (this.move_length < this.eps) {\n            this.move_length = 0;\n            this.vx = this.vy = 0;\n            this.player.state = \"normal\";\n        } else {\n            let moved = Math.min(this.move_length, this.speed * this.timedelta / 1000);\n            this.player.x += this.vx * moved;\n            this.player.y += this.vy * moved;\n            this.move_length -= moved;\n        }\n    }\n\n    rolling() {\n        this.player.state = \"displacement\";\n        this.player.general_skill.fresh_cold_time();\n        // 位移距离用屏幕高度的百分比来限制\n        this.move_length = 0.3;\n        this.speed_angle = this.player.speed_angle;\n        this.vx = Math.cos(this.speed_angle);\n        // robot的Y轴移动和player不同，player为了更加直观用的是角度方向\n        // 如Math.PI / 2这个角度就是向上移动，那么vy就是负数\n        // 而机器人在移动的时候还需要用到this.move_length，比player更加复杂，所以不能用this.update_move();代替\n        this.vy = Math.sin(this.speed_angle);\n    }\n\n    late_late_update() {\n        this.update_code_time();\n        if (this.player.character === \"me\") {\n            this.render_icon();\n        }\n        this.render();\n        if (this.player.state === \"displacement\") {\n            this.update_move();\n        }\n    }\n\n    // 计算两点间欧几里得距离\n    get_dist(x1, y1, x2, y2) {\n        let dx = x1 - x2;\n        let dy = y1 - y2;\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n}","import { Player } from \"./Player\";\nimport { FireBallSkill } from \"../skill/FireBallSkill\";\nimport { BlinkSkill } from \"../skill/BlinkSkill\";\nimport { ShieldSkill } from \"../skill/ShieldSkill\";\nimport { RapidFireSkill } from \"../skill/RapidFireSkill\";\nimport { RollingSkill } from \"../skill/RollingSkill\";\n\nexport class TaiEr extends Player {\n    constructor(playground, x, y, radius, color, speed, character, username, photo) {\n        super(playground, x, y, radius, color, speed, character, username, photo);\n\n        this.hero_name = \"太二\";\n        this.general_skill = new RapidFireSkill(this.playground, this, 0.6, 0.9, 0.04);  // 英雄普攻\n        this.awakened_skill = new RollingSkill(this.playground, this, 0.8, 0.9, 0.04);  // 英雄觉醒技能\n        this.summoner_skill = new BlinkSkill(this.playground, this, 1.0, 0.9, 0.04);  // 召唤师技能\n    }\n\n    level_up() {\n        this.level += 1;\n        if (this.level == 5) {\n            this.general_skill.scatter = 3;\n        }\n        if (this.level == 10) {\n            this.general_skill.scatter = 4;\n        }\n        this.health = this.base_health;\n    }\n}","import { FireBall } from \"./FireBall\";\nimport { Skill } from \"./Skill\";\n\nexport class MagicLightBallSkill extends Skill {\n    constructor(playground, player, icon_x, icon_y, icon_r) {\n        super(playground, player, icon_x, icon_y, icon_r);\n\n        this.owner = \"小耶\";\n        this.name = \"MagicLightBall\";\n        this.skill_type = \"general_skill\";\n        this.base_cold_time = 0.8;  // 冷却时间，单位：秒\n        this.cold_time = 0;\n\n        this.base_fire_interval = 0;  // 射击间隔，单位：秒\n        this.fire_interval = this.base_fire_interval;\n        this.base_bullet = 1;\n        this.bullet = this.base_bullet;  // 剩余子弹数量\n\n        this.img.src = \"https://project-static-file.oss-cn-hangzhou.aliyuncs.com/AwakenedAlliance/aoyi/xiaoye/general_skill.png\";\n\n        this.radius = this.playground.height * 0.02 / this.playground.scale;\n        this.color = \"pink\";\n        this.speed = this.playground.height * 0.8 / this.playground.scale;\n        this.move_length = this.playground.height * 0.6 / this.playground.scale;\n        this.damage = 80;\n\n        // this.player.level = 10;\n    }\n\n    start() {\n        this.fresh_cold_time();\n    }\n\n    fresh_cold_time() {\n        this.cold_time = 0;\n        this.fire_interval = 0;\n        this.bullet = this.base_bullet;\n    }\n\n    use_skill(tx, ty) {\n        // 只有当技能不在CD，并且不在射击间隔内，并且还有子弹时才会成功发射\n        if (this.cold_time < this.eps && this.fire_interval < this.eps && this.bullet > 0) {\n            let ball = this.fire(tx, ty);\n            this.fire_interval = this.base_fire_interval;\n            this.bullet -= 1;\n\n            if (this.bullet <= 0) {\n                this.cold_time = this.base_cold_time;\n            }\n\n            if (this.player.character === \"me\" && this.playground.store.state.game_mode === \"multi mode\") {\n                let skill_data = {\n                    \"ball_uuid\": ball.uuid,\n                    \"tx\": tx,\n                    \"ty\": ty,\n                };\n                this.playground.mps.send_use_general_skill(skill_data);\n            }\n        }\n    }\n\n    fire(tx, ty) {\n        let ball = this.shoot_fireball(tx, ty, 0);\n        return ball;\n    }\n\n    receive_use_skill(skill_data) {\n        let fireball = this.fire(skill_data[\"tx\"], skill_data[\"ty\"]);\n        fireball.uuid = skill_data[\"ball_uuid\"];\n    }\n\n    update_code_time() {\n        this.cold_time -= this.timedelta / 1000;\n        this.cold_time = Math.max(this.cold_time, 0);\n\n        this.fire_interval -= this.timedelta / 1000;\n        this.fire_interval = Math.max(this.fire_interval, 0);\n\n        if (this.bullet === 0 && this.cold_time < this.eps) {\n            this.bullet = this.base_bullet;\n        }\n    }\n\n    shoot_fireball(tx, ty, delta_angle) {\n        let angle = Math.atan2(ty - this.player.y, tx - this.player.x);\n        angle += delta_angle;\n        let vx = Math.cos(angle), vy = Math.sin(angle);\n        let fireball = null;\n        if (this.player.character === \"me\") {\n            fireball = new FireBall(this.playground, this.player, this.player.x, this.player.y, this.radius, vx, vy, this.color, this.speed, this.move_length, this.damage);\n        } else {\n            fireball = new FireBall(this.playground, this.player, this.player.x, this.player.y, this.radius, vx, vy, this.color, this.speed, this.move_length, 10);\n        }\n        this.playground.fireballs.push(fireball);\n\n        return fireball;\n    }\n}","import { AcGameObject } from \"../AcGameObject\";\n\nexport default class MagicCircle extends AcGameObject {\n    constructor(playground, player, x, y, radius, color) {\n        super();\n        this.playground = playground;\n        this.player = player;\n        this.x = x;\n        this.y = y;\n        this.radius = radius;\n        this.color = color;\n\n        this.eps = 0.001;\n        this.ctx = this.playground.ctx;\n        this.decelerate_ratio = 0.6;  // 玩家进入魔法阵或被变身后的减速比例\n        this.transformation_radis_ratio = 0.6;  // 玩家变成小熊之后的缩小比例\n        this.base_circle_duration = 1;  // 法阵持续时间，法阵内的玩家减速\n        this.circle_duration = this.base_circle_duration;\n        this.base_magic_duration = 1.5;  // 法阵持续时间结束后，法阵内的玩家变熊的持续时间\n        this.magic_duration = this.base_magic_duration;\n\n        this.transformation_players = new Set();  // 被变身的玩家\n    }\n\n    start() {\n\n    }\n\n    update() {\n        this.update_duration_time();\n        this.update_inner_player();\n        this.render();\n    }\n\n    update_inner_player() {\n        if (this.circle_duration >= this.eps) {\n            for (let player of this.playground.players) {\n                if (player !== this.player && this.get_dist(player.x, player.y, this.x, this.y) < this.radius && player.decelerate_ratio < this.decelerate_ratio) {\n                    player.change_decelerate_ratio(this.decelerate_ratio);\n                } else if (player !== this.player && this.get_dist(player.x, player.y, this.x, this.y) >= this.radius && player.decelerate_ratio > 0) {\n                    player.change_decelerate_ratio(0);\n                }\n            }\n        } else if (this.transformation_players.size > 0) {\n            for (let player of this.transformation_players) {\n                if (player.decelerate_ratio < this.decelerate_ratio) {\n                    player.change_decelerate_ratio(this.decelerate_ratio);\n                }\n            }\n        }\n    }\n\n    // 法阵持续时间结束，将法阵范围内的玩家都变成小熊\n    transformation_inner_player() {\n        for (let player of this.playground.players) {\n            if (player !== this.player && this.get_dist(player.x, player.y, this.x, this.y) < this.radius) {\n                player.change_decelerate_ratio(0);\n                // 变小熊的影响暂时只有减速、减小半径、沉默，还没写更换图片的逻辑\n                player.change_state({\n                    \"skill_name\": \"transformation\",\n                    \"transformation_radis_ratio\": this.transformation_radis_ratio,\n                });\n                this.transformation_players.add(player);\n            }\n        }\n    }\n\n    // 变身时间结束，还原玩家\n    restore_players() {\n        for (let player of this.transformation_players) {\n            player.change_state({\n                \"skill_name\": \"transformation_restore\",\n            });\n        }\n    }\n\n    get_dist(x1, y1, x2, y2) {\n        let dx = x1 - x2;\n        let dy = y1 - y2;\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n\n    update_duration_time() {\n        if (this.circle_duration >= this.eps) {\n            this.circle_duration -= this.timedelta / 1000;\n            if (this.circle_duration < this.eps) {\n                this.circle_duration = 0;\n                this.magic_duration = this.base_magic_duration;\n                this.transformation_inner_player();\n            }\n        } else {\n            this.magic_duration -= this.timedelta / 1000;\n        }\n\n        if (this.magic_duration < this.eps) {\n            this.destroy();\n        }\n    }\n\n    on_destroy() {\n        this.restore_players();\n        this.transformation_players.clear();\n    }\n\n    render() {\n        // 法阵持续时间结束后就不绘制法阵了\n        if (this.circle_duration < this.eps) {\n            return;\n        }\n\n        let scale = this.playground.scale;\n        let ctx_x = this.playground.my_calculate_relative_position_x(this.x);\n        let ctx_y = this.playground.my_calculate_relative_position_y(this.y);\n        // 处于屏幕范围外，则不渲染\n        if (this.playground.is_element_out_of_screen(ctx_x, ctx_y)) {\n            return;\n        }\n\n        this.ctx.beginPath();\n        this.ctx.arc(ctx_x * scale, ctx_y * scale, this.radius * scale, 0, Math.PI * 2, false);\n        this.ctx.fillStyle = this.color;\n        this.ctx.fill();\n    }\n\n}","import MagicCircle from \"./MagicCircle\";\nimport { Skill } from \"./Skill\";\n\nexport class MagicalMagicSkill extends Skill {\n    constructor(playground, player, icon_x, icon_y, icon_r) {\n        super(playground, player, icon_x, icon_y, icon_r);\n\n        this.owner = \"小耶\";\n        this.name = \"MagicalMagic\";\n        this.skill_type = \"awakened_skill\";\n        this.base_cold_time = 1.8;  // 冷却时间，单位：秒\n        this.cold_time = this.base_cold_time;\n        this.img.src = \"https://project-static-file.oss-cn-hangzhou.aliyuncs.com/AwakenedAlliance/aoyi/xiaoye/awakened_skill.png\";\n\n        this.radius = this.playground.height * 0.11 / this.playground.scale;\n        this.color = \"pink\";\n        this.base_bullet = 1;\n        this.bullet = this.base_bullet;\n    }\n\n    use_skill() {\n        if (this.cold_time < this.eps) {\n            this.magic(this.player.tx, this.player.ty);\n            this.bullet -= 1;\n\n            if (this.bullet <= 0) {\n                this.cold_time = this.base_cold_time;\n            }\n\n            if (this.playground.store.state.game_mode === \"multi mode\") {\n                let skill_data = {\n                    \"tx\": this.player.tx,\n                    \"ty\": this.player.ty,\n                };\n                this.playground.mps.send_use_awakened_skill(skill_data);\n            }\n        }\n    }\n\n    receive_use_skill(skill_data) {\n        this.magic(skill_data[\"tx\"], skill_data[\"ty\"]);\n    }\n\n    update_move() {\n        if (this.move_length < this.eps) {\n            this.move_length = 0;\n            this.vx = this.vy = 0;\n            this.player.state = \"normal\";\n        } else {\n            let moved = Math.min(this.move_length, this.speed * this.timedelta / 1000);\n            this.player.x += this.vx * moved;\n            this.player.y += -this.vy * moved;\n            this.move_length -= moved;\n        }\n    }\n\n    magic(tx, ty) {\n        this.magic_circle = new MagicCircle(this.playground, this.player, tx, ty, this.radius, this.color);\n    }\n\n    update_code_time() {\n        this.cold_time -= this.timedelta / 1000;\n        this.cold_time = Math.max(this.cold_time, 0);\n\n        if (this.bullet === 0 && this.cold_time < this.eps) {\n            this.bullet = this.base_bullet;\n        }\n    }\n\n    late_late_update() {\n        this.update_code_time();\n        if (this.player.character === \"me\") {\n            this.render_icon();\n        }\n        this.render();\n        if (this.player.state === \"displacement\") {\n            this.update_move();\n        }\n    }\n\n    // 计算两点间欧几里得距离\n    get_dist(x1, y1, x2, y2) {\n        let dx = x1 - x2;\n        let dy = y1 - y2;\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n}","import { Player } from \"./Player\";\nimport { FireBallSkill } from \"../skill/FireBallSkill\";\nimport { BlinkSkill } from \"../skill/BlinkSkill\";\nimport { ShieldSkill } from \"../skill/ShieldSkill\";\nimport { RapidFireSkill } from \"../skill/RapidFireSkill\";\nimport { RollingSkill } from \"../skill/RollingSkill\";\nimport { MagicLightBallSkill } from \"../skill/MagicLightBallSkill\";\nimport { MagicalMagicSkill } from \"../skill/MagicalMagicSkill\";\n\nexport class XiaoYe extends Player {\n    constructor(playground, x, y, radius, color, speed, character, username, photo) {\n        super(playground, x, y, radius, color, speed, character, username, photo);\n\n        this.hero_name = \"小耶\";\n        this.general_skill = new MagicLightBallSkill(this.playground, this, 0.6, 0.9, 0.04);  // 英雄普攻\n        this.awakened_skill = new MagicalMagicSkill(this.playground, this, 0.8, 0.9, 0.04);  // 英雄觉醒技能\n        this.summoner_skill = new BlinkSkill(this.playground, this, 1.0, 0.9, 0.04);  // 召唤师技能\n    }\n\n    level_up() {\n        this.level += 1;\n        if (this.level === 5) {\n            this.general_skill.damage *= 1.5;\n        }\n        if (this.level === 10) {\n            this.awakened_skill.base_bullet = 2;\n        }\n        // this.awakened_skill.bullet = this.awakened_skill.base_bullet;\n        this.health = this.base_health;\n    }\n\n    // load_image() {\n    //     this.img = new Image();\n    //     this.img.src = this.playground.store.state.select_hero_info.avatar;\n    // }\n}","import { FireBall } from \"./FireBall\";\nimport { Skill } from \"./Skill\";\n\nexport class DivineAxeSkill extends Skill {\n    constructor(playground, player, icon_x, icon_y, icon_r) {\n        super(playground, player, icon_x, icon_y, icon_r);\n\n        this.owner = \"龙炎\";\n        this.name = \"DivineAxeSkill\";\n        this.skill_type = \"general_skill\";\n        this.damage = 70;\n\n        this.player_base_speed = this.player.base_speed;  // 暂存玩家的基础速度\n        this.base_cold_time = 0.6;  // 冷却时间，单位：秒\n        this.cold_time = 0;\n        this.base_fire_interval = 0;  // 射击间隔，单位：秒\n        this.fire_interval = this.base_fire_interval;\n        this.base_bullet = 1;\n        this.bullet = this.base_bullet;  // 剩余子弹数量\n\n        this.hit_numbers = 0;  // 命中敌人的次数\n        this.axe_length = this.player.radius * 4;  // 斧子攻击范围的长度\n        this.axe_width = this.player.radius * 1.2;  // 斧子攻击范围的宽度\n\n        this.base_duration = 0.3;\n        this.duration = 0;  // 攻击特效的持续时间，最后才会产生伤害\n\n        this.base_accelerate_time = 1.5;  // 击中敌人三次后加速1.5秒\n        this.accelerate_time = 0;\n        this.is_accelerating = false;  // 是否正在加速，用于结束加速状态\n        this.accelerate_ratio = 2;  // 加速倍率\n\n        this.angle = 0;  // 攻击的角度，攻击一旦开始角度不可变\n        this.can_hit = false;  // 是否可以攻击，用于在特效结束后对范围内的敌人进行攻击\n        this.color = \"rgba(255, 0, 0, 0.6)\";\n\n\n        this.img.src = \"https://project-static-file.oss-cn-hangzhou.aliyuncs.com/AwakenedAlliance/aoyi/longyan/general_skill.png\";\n    }\n\n    start() {\n        this.fresh_cold_time();\n    }\n\n    fresh_cold_time() {\n        this.cold_time = 0;\n        this.fire_interval = 0;\n        this.bullet = this.base_bullet;\n    }\n\n    use_skill(tx, ty) {\n        // 只有当技能不在CD，并且不在射击间隔内，并且还有子弹时才会成功发射\n        if (this.cold_time < this.eps && this.fire_interval < this.eps && this.bullet > 0) {\n            let fireball = this.axe(tx, ty);\n            this.fire_interval = this.base_fire_interval;\n            this.bullet -= 1;\n            this.can_hit = true;\n\n            if (this.bullet <= 0) {\n                this.cold_time = this.base_cold_time;\n            }\n\n            if (this.player.character === \"me\" && this.playground.store.state.game_mode === \"multi mode\") {\n                let skill_data = {\n                    \"tx\": tx,\n                    \"ty\": ty,\n                };\n                this.playground.mps.send_use_general_skill(skill_data);\n            }\n        }\n    }\n\n    update_code_time() {\n        this.cold_time -= this.timedelta / 1000;\n        this.cold_time = Math.max(this.cold_time, 0);\n\n        this.fire_interval -= this.timedelta / 1000;\n        this.fire_interval = Math.max(this.fire_interval, 0);\n\n        this.duration -= this.timedelta / 1000;\n        this.duration = Math.max(this.duration, 0);\n\n        this.accelerate_time -= this.timedelta / 1000;\n        this.accelerate_time = Math.max(this.accelerate_time, 0);\n\n        if (this.bullet === 0 && this.cold_time < this.eps) {\n            this.bullet = this.base_bullet;\n        }\n\n        if (this.is_accelerating && this.accelerate_time < this.eps) {\n            this.restore_accelerate();\n        }\n\n        this.update_hit_player();\n    }\n\n    restore_accelerate() {\n        this.player.base_speed = this.player_base_speed;\n        // 如果速度为0，表示玩家没有移动，或者被“眩晕”了，那就不将加速结果更新到移速上\n        if (this.player.speed > this.eps) {\n            this.player.speed = this.player.get_speed();\n        }\n        this.is_accelerating = false;\n    }\n\n    accelerate() {\n        this.player.base_speed = this.player_base_speed * 2;\n        if (this.player.speed > this.eps) {\n            this.player.speed = this.player.get_speed();\n        }\n        this.is_accelerating = true;\n        this.accelerate_time = this.base_accelerate_time;\n    }\n\n    update_hit_player() {\n        if (this.can_hit && this.duration < this.eps) {\n            this.can_hit = false;\n            let back = this.hit_palyer();\n            if (back) {\n                this.hit_numbers += 1;\n                if (this.hit_numbers % 3 === 0) {\n                    this.accelerate();\n                }\n            }\n        }\n    }\n\n    hit_palyer() {\n        let is_hit = false;\n\n        for (let player of this.playground.players) {\n            if (player === this.player) continue;\n            if (this.is_collision(player)) {\n                is_hit = true;\n                this.attack(player);\n            }\n        }\n        return is_hit;\n    }\n\n    attack(player) {\n        let flag = player.is_attacked(this.new_angle, this.damage);\n\n        // 调用广播函数\n        if (this.playground.store.state.game_mode === \"multi mode\") {\n            this.playground.mps.send_attack(player.uuid, player.x, player.y, this.angle, this.damage, this.uuid);\n        }\n\n        if (flag) {\n            // 如果返回值是true，说明被攻击者死亡\n            this.player.level_up();\n            console.log(\"LEVEL UP: \", this.player.level);\n            // 调用广播函数\n            if (this.playground.store.state.game_mode === \"multi mode\") {\n                // TODO：当本地被攻击者死亡的时候，在多人模式下，可能对方刚好释放了治疗术，没有死\n                // 为了保持一致，需要发送一个死亡同步函数，告诉对方他已经死了\n            }\n        }\n    }\n\n    // 判断玩家是否和攻击的范围重叠，这里为了简化计算，模拟圆在矩形周围滚一圈，然后判断圆心是否在这个范围内\n    // 其中会把四个角扩展到直角，所以攻击范围比显示的大了四个角\n    is_collision(player) {\n        let ctx_x = this.playground.my_calculate_relative_position_x(this.player.x);\n        let ctx_y = this.playground.my_calculate_relative_position_y(this.player.y);\n        let ctx_tx = this.playground.my_calculate_relative_position_x(player.x);\n        let ctx_ty = this.playground.my_calculate_relative_position_y(player.y);\n        let center_point_x = ctx_x + this.axe_length / 2 * Math.cos(this.angle);\n        let center_point_y = ctx_y + this.axe_length / 2 * Math.sin(this.angle);\n        this.new_angle = Math.atan2(ctx_ty - center_point_y, ctx_tx - center_point_x);\n        let dist = this.get_dist(ctx_tx, ctx_ty, center_point_x, center_point_y);\n        let dist_x = Math.abs(dist * Math.cos(this.new_angle - this.angle));\n        let dist_y = Math.abs(dist * Math.sin(this.new_angle - this.angle));\n\n        if (dist_x <= this.axe_length / 2 + player.radius && dist_y <= this.axe_width / 2 + player.radius) {\n            return true;\n        }\n        return false;\n    }\n\n    axe(tx, ty) {\n        this.angle = Math.atan2(ty - this.player.y, tx - this.player.x);\n        this.duration = this.base_duration;\n    }\n\n    get_dist(x1, y1, x2, y2) {\n        let dx = x1 - x2;\n        let dy = y1 - y2;\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n\n    receive_use_skill(skill_data) {\n        this.axe(skill_data[\"tx\"], skill_data[\"ty\"]);\n    }\n\n    render() {\n        if (this.duration < this.eps) {\n            return;\n        }\n\n        let scale = this.playground.scale;\n        let ctx_x = this.playground.my_calculate_relative_position_x(this.player.x);\n        let ctx_y = this.playground.my_calculate_relative_position_y(this.player.y);\n        let ctx_tx = ctx_x + this.axe_length * Math.cos(this.angle);\n        let ctx_ty = ctx_y + this.axe_length * Math.sin(this.angle);\n        // let ctx_tx = ctx_x + (this.axe_length * (1 - this.duration / this.base_duration)) * Math.cos(this.angle);\n        // let ctx_ty = ctx_y + (this.axe_length * (1 - this.duration / this.base_duration)) * Math.sin(this.angle);\n        // let cx = ctx_x + this.cube_side_len * 0.5, cy = ctx_y + this.cube_side_len * 0.5; // grid的中心坐标\n\n        // 处于屏幕范围外，则不渲染\n        if (this.playground.is_element_out_of_screen(ctx_x, ctx_y)) {\n            return;\n        }\n\n        this.ctx.save();\n        this.ctx.beginPath();\n        this.ctx.moveTo(ctx_x * scale, ctx_y * scale);\n        this.ctx.lineTo(ctx_tx * scale, ctx_ty * scale);\n        this.ctx.strokeStyle = this.color;\n        this.ctx.lineWidth = this.axe_width * scale * (1 - this.duration / this.base_duration);\n        this.ctx.stroke();\n        this.ctx.restore();\n    }\n}","import { Skill } from \"./Skill\";\n\nexport class HeroChargeSkill extends Skill {\n    constructor(playground, player, icon_x, icon_y, icon_r) {\n        super(playground, player, icon_x, icon_y, icon_r);\n\n        this.owner = \"龙炎\";\n        this.name = \"HeroCharge\";\n        this.skill_type = \"awakened_skill\";\n        this.base_cold_time = 1.8;  // 冷却时间，单位：秒\n        this.cold_time = this.base_cold_time;\n        this.base_move_length = 0.6;  // “英雄冲锋”的冲刺距离\n        this.img.src = \"https://project-static-file.oss-cn-hangzhou.aliyuncs.com/AwakenedAlliance/aoyi/longyan/awakened_skill.png\";\n\n        this.speed = this.player.base_speed * 4.5;\n        this.base_bullet = 1;\n        this.bullet = this.base_bullet;\n\n        this.inner_players = new Set();  // 被冲锋沉默的玩家\n    }\n\n    start() {\n    }\n\n    use_skill() {\n        let player_arrow_angle = this.player.arrow.angle;\n        if (this.cold_time < this.eps) {\n            this.charge(player_arrow_angle);\n            this.bullet -= 1;\n\n            if (this.bullet <= 0) {\n                this.cold_time = this.base_cold_time;\n            }\n\n            if (this.playground.store.state.game_mode === \"multi mode\") {\n                let skill_data = {\n                    'player_arrow_angle': player_arrow_angle,\n                };\n                this.playground.mps.send_use_awakened_skill(skill_data);\n            }\n        }\n    }\n\n    receive_use_skill(skill_data) {\n        this.charge(skill_data[\"player_arrow_angle\"]);\n    }\n\n    update_move() {\n        if (this.move_length < this.eps) {\n            this.move_length = 0;\n            this.vx = this.vy = 0;\n            this.player.state = \"normal\";\n            // 冲锋结束后玩家还会眩晕0.5秒\n            for (let player of this.inner_players) {\n                setTimeout(function () {\n                    player.state = \"normal\";\n                }, 500);\n            }\n        } else {\n            let moved = Math.min(this.move_length, this.speed * this.timedelta / 1000);\n            this.player.x += this.vx * moved;\n            this.player.y += this.vy * moved;\n            this.move_length -= moved;\n            this.update_inner_player_move(this.vx, this.vy, moved);\n        }\n    }\n\n    update_inner_player_move(vx, vy, moved) {\n        for (let player of this.playground.players) {\n            if (player === this.player) continue;\n            if (this.get_dist(this.player.x, this.player.y, player.x, player.y) <= this.player.radius + player.radius) {\n                player.state = \"vertigo\";\n                this.inner_players.add(player);\n                player.x += vx * moved;\n                player.y += vy * moved;\n            }\n        }\n    }\n\n    charge(player_arrow_angle) {\n        this.player.state = \"displacement\";\n        this.player.general_skill.fresh_cold_time();\n        // 位移距离用屏幕高度的百分比来限制\n        this.move_length = this.base_move_length;\n        this.speed_angle = player_arrow_angle;\n        this.vx = Math.cos(this.speed_angle);\n        // robot的Y轴移动和player不同，player为了更加直观用的是角度方向\n        // 如Math.PI / 2这个角度就是向上移动，那么vy就是负数\n        // 而机器人在移动的时候还需要用到this.move_length，比player更加复杂，所以不能用this.update_move();代替\n        this.vy = Math.sin(this.speed_angle);\n    }\n\n    late_late_update() {\n        this.update_code_time();\n        if (this.player.character === \"me\") {\n            this.render_icon();\n        }\n        this.render();\n        if (this.player.state === \"displacement\") {\n            this.update_move();\n        }\n    }\n\n    update_code_time() {\n        this.cold_time -= this.timedelta / 1000;\n        this.cold_time = Math.max(this.cold_time, 0);\n\n        if (this.bullet === 0 && this.cold_time < this.eps) {\n            this.bullet = this.base_bullet;\n        }\n    }\n\n    // 计算两点间欧几里得距离\n    get_dist(x1, y1, x2, y2) {\n        let dx = x1 - x2;\n        let dy = y1 - y2;\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n}","import { Player } from \"./Player\";\nimport { FireBallSkill } from \"../skill/FireBallSkill\";\nimport { BlinkSkill } from \"../skill/BlinkSkill\";\nimport { ShieldSkill } from \"../skill/ShieldSkill\";\nimport { RapidFireSkill } from \"../skill/RapidFireSkill\";\nimport { RollingSkill } from \"../skill/RollingSkill\";\nimport { DivineAxeSkill } from \"../skill/DivineAxeSkill\";\nimport { HeroChargeSkill } from \"../skill/HeroChargeSkill\";\n\nexport class LongYan extends Player {\n    constructor(playground, x, y, radius, color, speed, character, username, photo) {\n        super(playground, x, y, radius, color, speed, character, username, photo);\n\n        this.hero_name = \"龙炎\";\n        this.general_skill = new DivineAxeSkill(this.playground, this, 0.6, 0.9, 0.04);  // 英雄普攻\n        this.awakened_skill = new HeroChargeSkill(this.playground, this, 0.8, 0.9, 0.04);  // 英雄觉醒技能\n        this.summoner_skill = new BlinkSkill(this.playground, this, 1.0, 0.9, 0.04);  // 召唤师技能\n    }\n\n    level_up() {\n        this.level += 1;\n        if (this.level == 5) {\n            this.general_skill.damage *= 1.5;\n        }\n        if (this.level == 10) {\n            this.awakened_skill.base_bullet = 2;\n        }\n        // this.awakened_skill.bullet = this.awakened_skill.base_bullet;\n        this.health = this.base_health;\n    }\n}","import { FireBall } from \"./FireBall\";\n\nexport class IceArrow extends FireBall {\n    constructor(playground, player, x, y, radius, vx, vy, color, speed, move_length, damage, decelerate_ratio, decelerate_time) {\n        super(playground, player, x, y, radius, vx, vy, color, speed, move_length, damage);\n        this.decelerate_ratio = decelerate_ratio;\n        this.decelerate_time = decelerate_time;\n        this.color = \"rgba(0, 0, 255, 0.8)\";\n    }\n\n    attack(player) {\n        let angle = Math.atan2(player.y - this.y, player.x - this.x);\n        let flag = player.is_attacked(angle, this.damage);\n\n        // 调用广播函数\n        if (this.playground.store.state.game_mode === \"multi mode\") {\n            this.playground.mps.send_fireball_attack(player.uuid, player.x, player.y, angle, this.damage, this.uuid);\n        }\n\n        // 如果返回值是true，说明被攻击者死亡\n        if (flag) {\n            this.player.level_up();\n            console.log(\"LEVEL UP: \", this.player.level);\n            // 调用广播函数\n            if (this.playground.store.state.game_mode === \"multi mode\") {\n                // TODO：当本地被攻击者死亡的时候，在多人模式下，可能对方刚好释放了治疗术，没有死\n                // 为了保持一致，需要发送一个死亡同步函数，告诉对方他已经死了\n            }\n        } else {\n            // 被攻击者没死的话，寒冰箭会减速敌人\n            // 每次减速20%，可叠加至100%，持续0.8秒\n            player.change_state({\n                \"skill_name\": \"ice_arrow\",\n                \"decelerate_ratio\": this.decelerate_ratio,\n                \"time\": this.decelerate_time,\n            });\n\n            if (this.playground.store.state.game_mode === \"multi mode\") {\n                this.playground.mps.send_player_change_state(player.uuid, {\n                    \"skill_name\": \"ice_arrow\",\n                    \"decelerate_ratio\": this.decelerate_ratio,\n                    \"time\": this.decelerate_time,\n                    \"arrow_uuid\": this.uuid,\n                });\n            }\n        }\n\n        this.destroy();\n    }\n}","import { FireBall } from \"./FireBall\";\nimport { IceArrow } from \"./IceArrow\";\nimport { Skill } from \"./Skill\";\n\nexport class IceArrowSkill extends Skill {\n    constructor(playground, player, icon_x, icon_y, icon_r) {\n        super(playground, player, icon_x, icon_y, icon_r);\n\n        this.owner = \"帝释天\";\n        this.name = \"IceArrowSkill\";\n        this.skill_type = \"general_skill\";\n        this.base_cold_time = 0.5;  // 冷却时间，单位：秒\n        this.cold_time = 0;\n\n        this.decelerate_ratio = 0.2;  // 寒冰箭的减速比例\n        this.decelerate_time = 0.8;  // 寒冰箭的减速持续时间\n        this.damage = 20;\n        this.radius = this.playground.height * 0.02 / this.playground.scale;\n        this.speed = this.playground.height * 0.8 / this.playground.scale;\n        this.move_length = this.playground.height * 0.6 / this.playground.scale;\n\n        this.base_fire_interval = 0;  // 射击间隔，单位：秒\n        this.fire_interval = this.base_fire_interval;\n        this.base_bullet = 1;\n        this.bullet = this.base_bullet;  // 剩余子弹数量\n\n\n        this.img.src = \"https://project-static-file.oss-cn-hangzhou.aliyuncs.com/AwakenedAlliance/aoyi/dishitian/general_skill.png\";\n    }\n\n    start() {\n        this.fresh_cold_time();\n    }\n\n    fresh_cold_time() {\n        this.cold_time = 0;\n        this.fire_interval = 0;\n        this.bullet = this.base_bullet;\n    }\n\n    use_skill(tx, ty) {\n        // 只有当技能不在CD，并且不在射击间隔内，并且还有子弹时才会成功发射\n        if (this.cold_time < this.eps && this.fire_interval < this.eps && this.bullet > 0) {\n            let fireball = this.archery(tx, ty);\n            this.fire_interval = this.base_fire_interval;\n            this.bullet -= 1;\n\n            if (this.bullet <= 0) {\n                this.cold_time = this.base_cold_time;\n            }\n\n            if (this.player.character === \"me\" && this.playground.store.state.game_mode === \"multi mode\") {\n                let skill_data = {\n                    \"ball_uuid\": fireball.uuid,\n                    \"tx\": tx,\n                    \"ty\": ty,\n                };\n                this.playground.mps.send_use_general_skill(skill_data);\n            }\n        }\n    }\n\n    update_code_time() {\n        this.cold_time -= this.timedelta / 1000;\n        this.cold_time = Math.max(this.cold_time, 0);\n\n        this.fire_interval -= this.timedelta / 1000;\n        this.fire_interval = Math.max(this.fire_interval, 0);\n\n        if (this.bullet === 0 && this.cold_time < this.eps) {\n            this.bullet = this.base_bullet;\n        }\n    }\n\n    // 射箭\n    archery(tx, ty) {\n        let fireball = this.shoot_fireball(tx, ty);\n        return fireball;\n    }\n\n    receive_use_skill(skill_data) {\n        let fireball = this.archery(skill_data[\"tx\"], skill_data[\"ty\"]);\n        fireball.uuid = skill_data[\"ball_uuid\"];\n    }\n\n    shoot_fireball(tx, ty) {\n        let angle = Math.atan2(ty - this.player.y, tx - this.player.x);\n        let vx = Math.cos(angle), vy = Math.sin(angle);\n        let color = \"rgba(0, 0, 255, 0.8)\";\n        let fireball = null;\n        if (this.player.character === \"me\") {\n            fireball = new IceArrow(this.playground, this.player, this.player.x, this.player.y, this.radius, vx, vy, color, this.speed, this.move_length, this.damage, this.decelerate_ratio, this.decelerate_time);\n        } else {\n            fireball = new IceArrow(this.playground, this.player, this.player.x, this.player.y, this.radius, vx, vy, color, this.speed, this.move_length, 10, this.decelerate_ratio, this.decelerate_time);\n        }\n        this.playground.fireballs.push(fireball);\n\n        return fireball;\n    }\n}","import { normalizeStyle } from \"vue\";\nimport { FireBall } from \"./FireBall\";\nimport { IceArrow } from \"./IceArrow\";\nimport { Skill } from \"./Skill\";\n\nexport class ThousandArrowsSkill extends Skill {\n    constructor(playground, player, icon_x, icon_y, icon_r) {\n        super(playground, player, icon_x, icon_y, icon_r);\n\n        this.owner = \"帝释天\";\n        this.name = \"ThousandArrowsSkill\";\n        this.skill_type = \"awakened_skill\";\n        this.base_cold_time = 2;  // 冷却时间，单位：秒\n        this.cold_time = 0;\n\n        this.decelerate_ratio = this.player.general_skill.decelerate_ratio;  // 寒冰箭的减速比例\n        this.decelerate_time = this.player.general_skill.decelerate_time;  // 寒冰箭的减速持续时间\n        this.damage = this.player.general_skill.damage;\n        this.radius = this.player.general_skill.radius;\n        this.speed = this.player.general_skill.speed;\n        this.move_length = this.player.general_skill.move_length;\n\n        this.base_fire_interval = 0;  // 射击间隔，单位：秒\n        this.fire_interval = this.base_fire_interval;\n        this.base_bullet = 1;\n        this.bullet = this.base_bullet;  // 剩余子弹数量\n\n        this.scatter = 3;  // 散射量\n\n        this.img.src = \"https://project-static-file.oss-cn-hangzhou.aliyuncs.com/AwakenedAlliance/aoyi/dishitian/awakened_skill.png\";\n    }\n\n    start() {\n        this.fresh_cold_time();\n    }\n\n    fresh_cold_time() {\n        this.cold_time = 0;\n        this.fire_interval = 0;\n        this.bullet = this.base_bullet;\n    }\n\n    use_skill(tx, ty) {\n        // 只有当技能不在CD，并且不在射击间隔内，并且还有子弹时才会成功发射\n        if (this.cold_time < this.eps && this.fire_interval < this.eps && this.bullet > 0) {\n            let fireball_list = this.archery(tx, ty);\n            let ball_uuid_list = [];\n            for (let ball of fireball_list) {\n                ball_uuid_list.push(ball.uuid);\n            }\n            this.fire_interval = this.base_fire_interval;\n            this.bullet -= 1;\n\n            if (this.bullet <= 0) {\n                this.cold_time = this.base_cold_time;\n            }\n\n            if (this.player.character === \"me\" && this.playground.store.state.game_mode === \"multi mode\") {\n                let skill_data = {\n                    \"ball_uuid_list\": ball_uuid_list,\n                    \"tx\": tx,\n                    \"ty\": ty,\n                };\n                this.playground.mps.send_use_awakened_skill(skill_data);\n            }\n        }\n    }\n\n    update_code_time() {\n        this.cold_time -= this.timedelta / 1000;\n        this.cold_time = Math.max(this.cold_time, 0);\n\n        this.fire_interval -= this.timedelta / 1000;\n        this.fire_interval = Math.max(this.fire_interval, 0);\n\n        if (this.bullet === 0 && this.cold_time < this.eps) {\n            this.bullet = this.base_bullet;\n        }\n    }\n\n    archery(tx, ty) {\n        let delta_angle = Math.PI / 10;\n        let fireball_list = [];\n\n        if (this.scatter === 3) {\n            fireball_list.push(this.shoot_fireball(tx, ty, delta_angle));\n            fireball_list.push(this.shoot_fireball(tx, ty, 0));\n            fireball_list.push(this.shoot_fireball(tx, ty, -delta_angle));\n        } else if (this.scatter === 5) {\n            fireball_list.push(this.shoot_fireball(tx, ty, delta_angle));\n            fireball_list.push(this.shoot_fireball(tx, ty, -delta_angle));\n            fireball_list.push(this.shoot_fireball(tx, ty, 0));\n            fireball_list.push(this.shoot_fireball(tx, ty, delta_angle * 2));\n            fireball_list.push(this.shoot_fireball(tx, ty, -delta_angle * 2));\n        } else {\n            console.log(\"[SCATTER ERROR]\");\n        }\n\n        return fireball_list;\n    }\n\n    receive_use_skill(skill_data) {\n        let fireball_list = this.archery(skill_data[\"tx\"], skill_data[\"ty\"]);\n\n        for (let i = 0; i < fireball_list.length; i++) {\n            fireball_list[i].uuid = skill_data.ball_uuid_list[i];\n        }\n    }\n\n    shoot_fireball(tx, ty, delta_angle) {\n        let angle = Math.atan2(ty - this.player.y, tx - this.player.x);\n        angle += delta_angle;\n        let vx = Math.cos(angle), vy = Math.sin(angle);\n        let color = \"red\";\n        let fireball = null;\n        if (this.player.character === \"me\") {\n            fireball = new IceArrow(this.playground, this.player, this.player.x, this.player.y, this.radius, vx, vy, color, this.speed, this.move_length, this.damage, this.decelerate_ratio, this.decelerate_time);\n        } else {\n            fireball = new IceArrow(this.playground, this.player, this.player.x, this.player.y, this.radius, vx, vy, color, this.speed, this.move_length, 10, this.decelerate_ratio, this.decelerate_time);\n        }\n        this.playground.fireballs.push(fireball);\n\n        return fireball;\n    }\n}","import { Player } from \"./Player\";\nimport { FireBallSkill } from \"../skill/FireBallSkill\";\nimport { BlinkSkill } from \"../skill/BlinkSkill\";\nimport { ShieldSkill } from \"../skill/ShieldSkill\";\nimport { RapidFireSkill } from \"../skill/RapidFireSkill\";\nimport { RollingSkill } from \"../skill/RollingSkill\";\nimport { IceArrowSkill } from \"../skill/IceArrowSkill\";\nimport { ThousandArrowsSkill } from \"../skill/ThousandArrowsSkill\";\n\nexport class DiShiTian extends Player {\n    constructor(playground, x, y, radius, color, speed, character, username, photo) {\n        super(playground, x, y, radius, color, speed, character, username, photo);\n\n        this.hero_name = \"帝释天\";\n        this.general_skill = new IceArrowSkill(this.playground, this, 0.6, 0.9, 0.04);  // 英雄普攻\n        this.awakened_skill = new ThousandArrowsSkill(this.playground, this, 0.8, 0.9, 0.04);  // 英雄觉醒技能\n        this.summoner_skill = new BlinkSkill(this.playground, this, 1.0, 0.9, 0.04);  // 召唤师技能\n    }\n\n    level_up() {\n        this.level += 1;\n        if (this.level == 5) {\n            this.awakened_skill.scatter = 5;\n        }\n        if (this.level == 10) {\n            // 10级增加寒冰箭的减速比例和减速时间\n            this.general_skill.decelerate_ratio * 1.5;\n            this.general_skill.decelerate_time * 1.2;\n        }\n        this.health = this.base_health;\n    }\n}","import { Player } from \"../heros/Player\";\r\nimport { TaiEr } from \"../heros/TaiEr\";\r\nimport { XiaoYe } from \"../heros/XiaoYe\";\r\nimport { LongYan } from \"../heros/LongYan\";\r\nimport { DiShiTian } from \"../heros/DiShiTian\";\r\n\r\nexport class MultiPlayerSocket {\r\n    constructor(playground) {\r\n        this.playground = playground;\r\n\r\n        this.ws = new WebSocket(\"wss://app4689.acapp.acwing.com.cn:4436/wss/multiplayer/\");\r\n\r\n        this.start();\r\n    }\r\n\r\n    start() {\r\n        this.receive();\r\n    }\r\n\r\n    receive() {\r\n        let outer = this;\r\n\r\n        // 前端接收wss协议信息的函数\r\n        this.ws.onmessage = function (e) {\r\n            // 将字符串信息转换成json格式\r\n            let data = JSON.parse(e.data);\r\n            let uuid = data.uuid;\r\n            // 如果收到的是自己窗口发送的消息就不需要处理\r\n            if (uuid === outer.uuid) return false;\r\n\r\n            let event = data.event;\r\n            if (event === \"create_player\") {\r\n                // 后端通过wss连接要求前端创建新的玩家，于是这里调用相应的创建玩家的函数\r\n                outer.receive_create_player(uuid, data.username, data.photo);\r\n            } else if (event === \"move_toward\") {\r\n                outer.receive_move_toward(uuid, data.directions_array, data.x, data.y);\r\n            } else if (event === \"use_general_skill\") {\r\n                outer.receive_use_general_skill(uuid, data.skill_data);\r\n            } else if (event === \"use_awakened_skill\") {\r\n                outer.receive_use_awakened_skill(uuid, data.skill_data);\r\n            } else if (event === \"use_summoner_skill\") {\r\n                outer.receive_use_summoner_skill(uuid, data.skill_data);\r\n            } else if (event === \"fireball_attack\") {\r\n                outer.receive_fireball_attack(uuid, data.attackee_uuid, data.x, data.y, data.angle, data.damage, data.ball_uuid);\r\n            } else if (event === \"attack\") {\r\n                outer.receive_attack(uuid, data.attackee_uuid, data.x, data.y, data.angle, data.damage);\r\n            } else if (event === \"message\") {\r\n                outer.receive_chat_message(uuid, data.username, data.text);\r\n            } else if (event === \"update_player_info\") {\r\n                outer.receive_update_player_info(uuid, data.hero_name);\r\n            } else if (event === \"player_change_state\") {\r\n                outer.receive_player_change_state(uuid, data.attackee_uuid, data.data);\r\n            }\r\n        };\r\n    }\r\n\r\n    get_player(uuid) {\r\n        let players = this.playground.players;\r\n        for (let i = 0; i < players.length; i++) {\r\n            let player = players[i];\r\n            if (player.uuid === uuid) {\r\n                return player;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    send_create_player(username, photo, hero_name) {\r\n        let outer = this;\r\n        this.ws.send(JSON.stringify({\r\n            'event': \"create_player\",\r\n            'uuid': outer.uuid,\r\n            'username': username,\r\n            'photo': photo,\r\n            'hero_name': hero_name,\r\n        }));\r\n    }\r\n\r\n    // 前端通过连接接收到创建函数的信息\r\n    receive_create_player(uuid, username, photo) {\r\n        let player = null;\r\n        // let rand_x = Math.random() * this.playground.virtual_map_width;\r\n        // let rand_y = Math.random() * this.playground.virtual_map_height;\r\n        // player = new Player(this.playground, rand_x, rand_y, this.playground.height * 0.05 / this.playground.scale, \"white\", this.playground.height * 0.3 / this.playground.scale, \"enemy\", username, photo);\r\n        let x = 0.5 * this.playground.width / this.playground.scale;\r\n        let y = 0.5 * this.playground.height / this.playground.scale;\r\n        player = new Player(this.playground, x, y, this.playground.height * 0.05 / this.playground.scale, \"white\", this.playground.height * 0.3 / this.playground.scale, \"enemy\", username, photo);\r\n\r\n        // 创建玩家后需要将uuid更改为传过来的uuid，最后再添加到玩家池里面\r\n        player.uuid = uuid;\r\n        this.playground.players.push(player);\r\n\r\n        this.send_update_player_info();\r\n    }\r\n\r\n    // 同步操作数组的同时也要同步位置，这样玩家就可以主动更新自己在其他玩家眼中的位置，更加合理\r\n    send_move_toward(directions, x, y) {\r\n        let outer = this;\r\n        // 因为JSON.stringify()无法将Set()对象转换为字符串（转换后会丢失所有内容）\r\n        // 所以需要先用[...directions]将Set()对象解包并转换成数组的形式，然后才能转换成字符串\r\n        // 在接收其他窗口数据的时候将字符串转换为数组，再new Set(array)即可\r\n        let directions_array = [...directions];\r\n        this.ws.send(JSON.stringify({\r\n            'event': \"move_toward\",\r\n            'uuid': outer.uuid,\r\n            'directions_array': directions_array,\r\n            'x': x,\r\n            'y': y,\r\n        }));\r\n    }\r\n\r\n    receive_move_toward(uuid, directions_array, x, y) {\r\n        let player = this.get_player(uuid);\r\n\r\n        if (player) {\r\n            let directions = new Set(directions_array);\r\n            player.x = x;\r\n            player.y = y;\r\n            player.update_speed_angle(directions);\r\n        }\r\n    }\r\n\r\n    send_update_player_info() {\r\n        let outer = this;\r\n        this.ws.send(JSON.stringify({\r\n            'event': \"update_player_info\",\r\n            'uuid': outer.uuid,\r\n            'hero_name': outer.playground.store.state.select_hero_name,\r\n        }));\r\n    }\r\n\r\n    receive_update_player_info(uuid, hero_name) {\r\n        let player = this.get_player(uuid);\r\n        let username = player.username;\r\n        let photo = player.photo;\r\n        player.destroy();\r\n\r\n        // let rand_x = Math.random() * this.playground.virtual_map_width;\r\n        // let rand_y = Math.random() * this.playground.virtual_map_height;\r\n        let rand_x = 0.5 * this.playground.width / this.playground.scale;\r\n        let rand_y = 0.5 * this.playground.height / this.playground.scale;\r\n        if (hero_name === \"太二\") {\r\n            player = new TaiEr(this.playground, rand_x, rand_y, this.playground.height * 0.05 / this.playground.scale, \"white\", this.playground.height * 0.3 / this.playground.scale, \"enemy\", username, photo);\r\n        } else if (hero_name === \"小耶\") {\r\n            player = new XiaoYe(this.playground, rand_x, rand_y, this.playground.height * 0.05 / this.playground.scale, \"white\", this.playground.height * 0.3 / this.playground.scale, \"enemy\", username, photo);\r\n        } else if (hero_name === \"龙炎\") {\r\n            player = new LongYan(this.playground, rand_x, rand_y, this.playground.height * 0.05 / this.playground.scale, \"white\", this.playground.height * 0.3 / this.playground.scale, \"enemy\", username, photo);\r\n        } else if (hero_name === \"帝释天\") {\r\n            player = new DiShiTian(this.playground, rand_x, rand_y, this.playground.height * 0.05 / this.playground.scale, \"white\", this.playground.height * 0.3 / this.playground.scale, \"enemy\", username, photo);\r\n        } else {\r\n            console.log(\"ERROR not a hero\");\r\n            // player = new TaiEr(this.playground, rand_x, rand_y, this.playground.height * 0.05 / this.playground.scale, \"white\", this.playground.height * 0.3 / this.playground.scale, \"enemy\", username, photo);\r\n        }\r\n\r\n        player.uuid = uuid;\r\n        this.playground.players.push(player);\r\n    }\r\n\r\n    send_use_general_skill(skill_data) {\r\n        let outer = this;\r\n        this.ws.send(JSON.stringify({\r\n            'event': \"general_skill\",\r\n            'uuid': outer.uuid,\r\n            'skill_data': skill_data,\r\n        }));\r\n    }\r\n\r\n    receive_use_general_skill(uuid, skill_data) {\r\n        let player = this.get_player(uuid);\r\n        if (player) {\r\n            player.general_skill.receive_use_skill(skill_data);\r\n        }\r\n    }\r\n\r\n    send_use_awakened_skill(skill_data) {\r\n        let outer = this;\r\n        this.ws.send(JSON.stringify({\r\n            'event': \"awakened_skill\",\r\n            'uuid': outer.uuid,\r\n            'skill_data': skill_data,\r\n        }))\r\n    }\r\n\r\n    receive_use_awakened_skill(uuid, skill_data) {\r\n        let player = this.get_player(uuid);\r\n        if (player) {\r\n            player.awakened_skill.receive_use_skill(skill_data);\r\n        }\r\n    }\r\n\r\n    send_use_summoner_skill(skill_data) {\r\n        let outer = this;\r\n        this.ws.send(JSON.stringify({\r\n            'event': \"summoner_skill\",\r\n            'uuid': outer.uuid,\r\n            'skill_data': skill_data,\r\n        }));\r\n    }\r\n\r\n    receive_use_summoner_skill(uuid, skill_data) {\r\n        let player = this.get_player(uuid);\r\n        if (player) {\r\n            player.summoner_skill.receive_use_skill(skill_data);\r\n        }\r\n    }\r\n\r\n    // x, y: 被攻击者的位置，用于同步\r\n    // angle: 攻击的角度（暂时用不到）\r\n    // ball_uuid: 广播这个炮弹已经击中人了\r\n    send_attack(attackee_uuid, x, y, angle, damage) {\r\n        let outer = this;\r\n        this.ws.send(JSON.stringify({\r\n            'event': \"attack\",\r\n            'uuid': outer.uuid,\r\n            'attackee_uuid': attackee_uuid,\r\n            'x': x,\r\n            'y': y,\r\n            'angle': angle,\r\n            'damage': damage,\r\n        }));\r\n    }\r\n\r\n    receive_attack(uuid, attackee_uuid, x, y, angle, damage) {\r\n        let attacker = this.get_player(uuid);\r\n        let attackee = this.get_player(attackee_uuid);\r\n        if (attacker && attackee) {\r\n            attackee.receive_attack(x, y, angle, damage, attacker);\r\n        }\r\n    }\r\n\r\n    send_fireball_attack(attackee_uuid, x, y, angle, damage, ball_uuid) {\r\n        let outer = this;\r\n        this.ws.send(JSON.stringify({\r\n            'event': \"fireball_attack\",\r\n            'uuid': outer.uuid,\r\n            'attackee_uuid': attackee_uuid,\r\n            'x': x,\r\n            'y': y,\r\n            'angle': angle,\r\n            'damage': damage,\r\n            'ball_uuid': ball_uuid,\r\n        }));\r\n    }\r\n\r\n    receive_fireball_attack(uuid, attackee_uuid, x, y, angle, damage, ball_uuid) {\r\n        let attacker = this.get_player(uuid);\r\n        let attackee = this.get_player(attackee_uuid);\r\n        if (attacker && attackee) {\r\n            attackee.receive_fireball_attack(x, y, angle, damage, ball_uuid, attacker);\r\n        }\r\n    }\r\n\r\n    receive_blink(uuid, tx, ty) {\r\n        let player = this.get_player(uuid);\r\n        if (player) {\r\n            player.blink(tx, ty);\r\n        }\r\n    }\r\n\r\n    send_chat_message(username, text) {\r\n        let outer = this;\r\n        this.ws.send(JSON.stringify({\r\n            'event': \"message\",\r\n            'uuid': outer.uuid,\r\n            'username': username,\r\n            'text': text,\r\n        }));\r\n    }\r\n\r\n    receive_chat_message(uuid, username, text) {\r\n        this.playground.chat_field.receive_add_message(username, text);\r\n    }\r\n\r\n    send_player_change_state(attackee_uuid, data) {\r\n        let outer = this;\r\n        this.ws.send(JSON.stringify({\r\n            'event': \"player_change_state\",\r\n            'uuid': outer.uuid,\r\n            'attackee_uuid': attackee_uuid,\r\n            'data': data,\r\n        }));\r\n    }\r\n\r\n    receive_player_change_state(uuid, attackee_uuid, data) {\r\n        let attacker = this.get_player(uuid);\r\n        let attackee = this.get_player(attackee_uuid);\r\n        if (attacker && attackee) {\r\n            attackee.change_state(data);\r\n        }\r\n    }\r\n}","// 实现联机对战（下） 01：10：08\r\n\r\nimport { AcGameObject } from \"./AcGameObject\";\r\n\r\nexport class NoticeBoard extends AcGameObject {\r\n    constructor(playground) {\r\n        super();\r\n        this.playground = playground;\r\n        this.ctx = this.playground.ctx;\r\n        this.player_count = 0;\r\n        this.text = \"已就绪：0人\";\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    add() {\r\n        this.player_count += 1;\r\n        this.write(\"已就绪：\" + this.player_count + \"人\");\r\n    }\r\n\r\n    write(text) {\r\n        this.text = text;\r\n    }\r\n\r\n    late_late_update() {\r\n        this.render();\r\n    }\r\n\r\n    render() {\r\n        this.ctx.font = \"40px serif\";\r\n        this.ctx.fillStyle = \"white\";\r\n        this.ctx.textAlign = \"center\";\r\n        this.ctx.fillText(this.text, this.playground.width / 2, this.playground.height * 0.1);\r\n    }\r\n}","// 聊天区\r\nimport $ from \"jquery\";\r\n\r\nexport class ChatField {\r\n    constructor(playground, chat_field_ref) {\r\n        this.playground = playground;\r\n        this.store = this.playground.store;\r\n        this.chat_field_ref = chat_field_ref;\r\n\r\n        this.func_id = null;\r\n\r\n        this.start();\r\n    }\r\n\r\n    start() {\r\n        this.add_listening_events();\r\n    }\r\n\r\n    add_listening_events() {\r\n        this.chat_field_ref.chat_field_input_ref.addEventListener('keydown', e => {\r\n            console.log(\"in {chat}\", e.key);\r\n            if (e.key === 'Enter') {\r\n                console.log(this.store.state.username, this.chat_field_ref.chat_field_input_ref.value);\r\n                let username = this.store.state.username;\r\n                let text = this.chat_field_ref.chat_field_input_ref.value;\r\n                if (text !== \"\") {\r\n                    this.chat_field_ref.chat_field_input_ref.value = \"\";\r\n                    this.add_message(username, text);\r\n                    this.playground.mps.send_chat_message(username, text);\r\n                }\r\n                this.hide_input();\r\n                e.preventDefault();\r\n            } else if (e.key === 'Escape') {\r\n                this.hide_input();\r\n                e.preventDefault();\r\n            }\r\n        });\r\n    }\r\n\r\n    render_message(message) {\r\n        return $(`<div>${message}</div>`);\r\n    }\r\n\r\n    add_message(username, text) {\r\n        let message = `[${username}] ${text}`;\r\n        this.chat_field_ref.chat_field_history_ref.append(this.render_message(message)[0]);\r\n        // 实现消息的自动滚动\r\n        this.chat_field_ref.chat_field_history_ref.scrollTop = this.chat_field_ref.chat_field_history_ref.scrollHeight;\r\n\r\n\r\n    }\r\n\r\n    receive_add_message(username, text) {\r\n        this.add_message(username, text);\r\n\r\n        this.show_history();\r\n        if (this.func_id) {\r\n            clearTimeout(this.func_id)\r\n        }\r\n        let outer = this;\r\n        this.func_id = setTimeout(function () {\r\n            outer.playground.store.commit('updateShowHistory', false);\r\n            outer.func_id = null;  // 关闭历史记录的时候顺便把监听函数id也清空了\r\n        }, 3000);\r\n        console.log(this.func_id);\r\n    }\r\n\r\n    show_history() {\r\n        this.playground.store.commit('updateShowHistory', true);\r\n    }\r\n\r\n    show_input() {\r\n        // 两次打开输入框的间隔很短，上次的历史记录可能还没有关，所以要把上次的监听函数关掉，让历史记录常亮\r\n        if (this.func_id) {\r\n            clearTimeout(this.func_id);\r\n        }\r\n\r\n        this.show_history();\r\n\r\n        this.playground.store.commit('updateChatting', true);\r\n        // 需要再按一次回车才能打字\r\n        this.chat_field_ref.chat_field_input_ref.focus();\r\n    }\r\n\r\n    hide_input() {\r\n        this.playground.store.commit('updateChatting', false);\r\n        this.playground.ctx.canvas.focus();\r\n\r\n        let outer = this;\r\n        // 关闭输入框之后三秒钟自动关闭历史记录\r\n        // 存储监听函数的id，之后可以根据id删除监听函数\r\n        this.func_id = setTimeout(function () {\r\n            outer.playground.store.commit('updateShowHistory', false);\r\n            outer.func_id = null;  // 关闭历史记录的时候顺便把监听函数id也清空了\r\n        }, 3000);\r\n        console.log(this.func_id);\r\n    }\r\n}","import { AcGameObject } from \"./AcGameObject\";\r\n\r\nexport class ScoreBoard extends AcGameObject {\r\n    constructor(playground) {\r\n        super();\r\n        this.playground = playground;\r\n        this.ctx = this.playground.ctx;\r\n        this.store = this.playground.store;\r\n\r\n        this.win_img = new Image();\r\n        this.win_img.src = \"https://cdn.acwing.com/media/article/image/2021/12/17/1_8f58341a5e-win.png\";\r\n\r\n        this.lose_img = new Image();\r\n        this.lose_img.src = \"https://cdn.acwing.com/media/article/image/2021/12/17/1_9254b5f95e-lose.png\";\r\n\r\n        this.start();\r\n        // this.win();\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    add_listening_events() {\r\n        if (!this.ctx.canvas) {\r\n            return false;\r\n        }\r\n        this.ctx.canvas.addEventListener('mouseup', e => {\r\n            console.log(\"typeof plg: \", typeof this.playground);\r\n            this.playground.show_select_mode();\r\n        })\r\n    }\r\n\r\n    win() {\r\n        this.playground.update_score();\r\n        this.store.commit('updateGameState', \"win\");\r\n        // this.playground.win();\r\n\r\n        let outer = this;\r\n        setTimeout(function () {\r\n            outer.add_listening_events();\r\n        }, 500);\r\n    }\r\n\r\n    lose() {\r\n        this.playground.update_score();\r\n        this.store.commit('updateGameState', \"lose\");\r\n        // this.playground.lose();\r\n\r\n        let outer = this;\r\n        setTimeout(function () {\r\n            outer.add_listening_events();\r\n        }, 500);\r\n\r\n        console.log(\"score_board add_listenint_events DONE\");\r\n    }\r\n\r\n    late_late_update() {\r\n        this.render();\r\n    }\r\n\r\n    render() {\r\n        let len = this.playground.height / 2;\r\n\r\n        if (this.store.state.game_state === \"win\") {\r\n            this.ctx.drawImage(this.win_img, this.playground.width / 2 - len / 2, this.playground.height / 2 - len / 2, len, len);\r\n        } else if (this.store.state.game_state == \"lose\") {\r\n            this.ctx.drawImage(this.lose_img, this.playground.width / 2 - len / 2, this.playground.height / 2 - len / 2, len, len);\r\n        }\r\n    }\r\n}","import { AcGameObject } from \"./AcGameObject\";\r\nimport { GameMap } from \"./GameMap\";\r\nimport { MultiGameMap } from \"./MultiGameMap\";\r\nimport { Player } from \"./heros/Player\";\r\nimport { MultiPlayerSocket } from \"./socket/multiplayer\";\r\nimport { NoticeBoard } from \"./NoticeBoard\";\r\nimport $ from 'jquery';\r\nimport Cookies from \"js-cookie\";\r\nimport { ChatField } from \"./ChatField\";\r\nimport { ScoreBoard } from \"./ScoreBoard\";\r\nimport router from \"@/router\";\r\nimport { FireMage } from \"./heros/FireMage\";\r\nimport { TaiEr } from \"./heros/TaiEr\";\r\nimport { XiaoYe } from \"./heros/XiaoYe\";\r\nimport { LongYan } from \"./heros/LongYan\";\r\nimport { DiShiTian } from \"./heros/DiShiTian\";\r\n\r\nexport class PlayGround extends AcGameObject {\r\n    constructor(canvas, ctx, div, store, chat_field_ref) {\r\n        super();\r\n        this.canvas = canvas;\r\n        this.ctx = ctx;\r\n        this.div = div;\r\n        this.store = store;\r\n        this.width = this.div.clientWidth;\r\n        this.height = this.div.clientHeight;\r\n        this.chat_field_ref = chat_field_ref;\r\n\r\n        this.scale = this.height;\r\n        this.players = [];\r\n        this.fireballs = [];\r\n        this.virtual_map_width = 3;  // 虚拟地图大小改成相对大小\r\n        this.virtual_map_height = this.virtual_map_width; // 正方形地图，方便画格子\r\n        // 画布中心在虚拟地图上的相对位置\r\n        this.ctx_x = 0.5 * this.width / this.scale;\r\n        this.ctx_y = 0.5 * this.height / this.scale;\r\n\r\n        this.game_map = new MultiGameMap(this, this.canvas);\r\n\r\n    }\r\n\r\n    start() {\r\n        this.resize();\r\n        let outer = this;\r\n        let resize_uuid = this.create_uuid();\r\n        $(window).on(`resize.${resize_uuid}`, function () {\r\n            outer.resize();\r\n            console.log(\"window.resize()\");\r\n        });\r\n\r\n        if (this.store.state.AcWingOS !== \"AcWingOS\") {\r\n            this.store.state.AcWingOS.api.window.on_close(function () {\r\n                $(window).off(`resize.${resize_uuid}`);\r\n                outer.hide();\r\n            });\r\n        }\r\n\r\n        // let player = new Player(this, 0.5 * this.width / this.scale, 0.5 * this.height / this.scale, this.height * 0.05 / this.scale, \"white\", this.height * 0.3 / this.scale, \"me\");\r\n        // this.players.push(player);\r\n        // this.re_calculate_cx_cy(player.x, player.y);\r\n        // this.focus_player = player;\r\n\r\n        // for (let i = 0; i < 20; i++) {\r\n        //     let rand_x = Math.random() * this.virtual_map_width;\r\n        //     let rand_y = Math.random() * this.virtual_map_height;\r\n        //     this.players.push(new Player(this, rand_x, rand_y, this.height * 0.05 / this.scale, this.get_random_color(), this.height * 0.3 / this.scale, \"robot\"));\r\n        // }\r\n\r\n    }\r\n\r\n    quit() {\r\n        this.show_select_mode();\r\n    }\r\n\r\n    restart(game_mode) {\r\n        let outer = this;\r\n        this.store.commit('updateScore', 0);\r\n        this.store.commit('updateGameState', \"waiting\");\r\n\r\n        let player = null;\r\n        if (this.store.state.select_hero_name === \"太二\") {\r\n            player = new TaiEr(this, 0.5 * this.width / this.scale, 0.5 * this.height / this.scale, this.height * 0.05 / this.scale, \"white\", this.height * 0.3 / this.scale, \"me\", this.store.state.username, this.store.state.photo);\r\n        } else if (this.store.state.select_hero_name === \"小耶\") {\r\n            player = new XiaoYe(this, 0.5 * this.width / this.scale, 0.5 * this.height / this.scale, this.height * 0.05 / this.scale, \"white\", this.height * 0.3 / this.scale, \"me\", this.store.state.username, this.store.state.photo);\r\n        } else if (this.store.state.select_hero_name === \"龙炎\") {\r\n            player = new LongYan(this, 0.5 * this.width / this.scale, 0.5 * this.height / this.scale, this.height * 0.05 / this.scale, \"white\", this.height * 0.3 / this.scale, \"me\", this.store.state.username, this.store.state.photo);\r\n        } else if (this.store.state.select_hero_name === \"帝释天\") {\r\n            player = new DiShiTian(this, 0.5 * this.width / this.scale, 0.5 * this.height / this.scale, this.height * 0.05 / this.scale, \"white\", this.height * 0.3 / this.scale, \"me\", this.store.state.username, this.store.state.photo);\r\n        } else {\r\n            player = new TaiEr(this, 0.5 * this.width / this.scale, 0.5 * this.height / this.scale, this.height * 0.05 / this.scale, \"white\", this.height * 0.3 / this.scale, \"me\", this.store.state.username, this.store.state.photo);\r\n        }\r\n        this.players.push(player);\r\n        this.re_calculate_cx_cy(player.x, player.y);\r\n        this.focus_player = player;\r\n\r\n        this.ctx.canvas.focus();\r\n\r\n        if (game_mode === \"single mode\") {\r\n            for (let i = 0; i < 20; i++) {\r\n                let rand_x = Math.random() * this.virtual_map_width;\r\n                let rand_y = Math.random() * this.virtual_map_height;\r\n                this.players.push(new Player(this, rand_x, rand_y, this.height * 0.05 / this.scale, this.get_random_color(), this.height * 0.3 / this.scale, \"robot\"));\r\n            }\r\n            this.store.commit('updateGameState', \"fighting\");  // 单人模式中，添加所有机器人之后要设置成“战斗模式”\r\n        } else if (game_mode === \"multi mode\") {\r\n            this.notice_board = new NoticeBoard(this);\r\n            this.chat_field = new ChatField(this, this.chat_field_ref);\r\n            this.mps = new MultiPlayerSocket(this);  // 创建连接\r\n            this.mps.uuid = this.players[0].uuid;  // 将连接的uuid设置为玩家的uuid，方便之后分辨窗口归属\r\n\r\n            // 当连接创建成功时发送消息\r\n            this.mps.ws.onopen = function () {\r\n                outer.mps.send_create_player(outer.store.state.username, outer.store.state.photo);\r\n            };\r\n        }\r\n        this.score_board = new ScoreBoard(this);\r\n    }\r\n\r\n    create_uuid() {\r\n        let res = \"\";\r\n        for (let i = 0; i < 20; i++) {\r\n            let x = parseInt(Math.floor(Math.random() * 10));\r\n            res += x;\r\n        }\r\n        return res;\r\n    }\r\n\r\n    resize() {\r\n        this.ctx.canvas.width = this.div.clientWidth;\r\n        this.ctx.canvas.height = this.div.clientHeight;\r\n        this.width = this.div.clientWidth;\r\n        this.height = this.div.clientHeight;\r\n        this.scale = this.height;\r\n    }\r\n\r\n    // 根据各个元素在虚拟地图上的相对位置计算在画布上的相对位置\r\n    // 返回值是相对大小，以屏幕高度为单位1，所以在使用的时候要乘上this.scale\r\n    my_calculate_relative_position_x(x) {\r\n        return x - this.ctx_x + 0.5 * this.width / this.scale;\r\n    }\r\n    my_calculate_relative_position_y(y) {\r\n        return y - this.ctx_y + 0.5 * this.height / this.scale;\r\n    }\r\n\r\n    // 通过玩家鼠标的点击位置计算在虚拟地图中的对应位置\r\n    my_calculate_tx(x) {\r\n        return (x - 0.5 * this.width) / this.scale + this.ctx_x;\r\n    }\r\n    my_calculate_ty(y) {\r\n        return (y - 0.5 * this.height) / this.scale + this.ctx_y;\r\n    }\r\n\r\n\r\n    // 根据各个元素在虚拟地图上的相对位置计算在画布上的相对位置\r\n    re_calculate_cx_cy(x, y) {\r\n        // 计算物体相对于屏幕中心的坐标\r\n        this.cx = x - 0.5 * this.width / this.scale;\r\n        this.cy = y - 0.5 * this.height / this.scale;\r\n\r\n        let cube_side_len = this.game_map.cube_side_len;\r\n        if (this.focus_player) {\r\n            this.cx = Math.max(this.cx, -2 * cube_side_len);\r\n            this.cx = Math.min(this.cx, this.virtual_map_width - (this.width / this.scale - 2 * cube_side_len));\r\n            this.cy = Math.max(this.cy, -cube_side_len);\r\n            this.cy = Math.min(this.cy, this.virtual_map_height - (this.height / this.scale - cube_side_len));\r\n        }\r\n    }\r\n\r\n    append_player() {\r\n        let rand_x = Math.random() * this.virtual_map_width;\r\n        let rand_y = Math.random() * this.virtual_map_height;\r\n        this.players.push(new Player(this, rand_x, rand_y, this.height * 0.05 / this.scale, this.get_random_color(), this.height * 0.3 / this.scale, \"robot\"));\r\n\r\n        const score = this.store.state.score + 1;\r\n        this.store.commit('updateScore', score);\r\n        this.store.commit('updateRecord', score);\r\n        console.log(\"[score]:\", this.store.state.score, \"[record]:\", this.store.state.record);\r\n    }\r\n\r\n    get_random_color() {\r\n        let colors = [\"red\", \"pink\", \"grey\", \"green\", \"lightblue\", \"lightgreen\", \"yellow\", \"orange\", \"gold\"];\r\n        return colors[Math.floor(Math.random() * colors.length)];\r\n    }\r\n\r\n    // 更新分数到服务器\r\n    update_score() {\r\n        console.log(\"update score: \", this.store.state.score);\r\n        $.ajax({\r\n            url: \"https://app4689.acapp.acwing.com.cn:4436/update_score/\",\r\n            type: \"post\",\r\n            data: {\r\n                rank_score: this.store.state.score,\r\n                game_mode: this.store.state.game_mode,\r\n            },\r\n            headers: {\r\n                'Authorization': \"Bearer \" + Cookies.get(\"access\"),\r\n            },\r\n        });\r\n    }\r\n\r\n    is_element_out_of_screen(ctx_x, ctx_y) {\r\n        if (ctx_x < -0.2 * this.width / this.scale ||\r\n            ctx_x > 1.2 * this.width / this.scale ||\r\n            ctx_y < -0.2 * this.height / this.scale ||\r\n            ctx_y > 1.2 * this.height / this.scale) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    hide() {\r\n        while (this.players && this.players.length > 0) {\r\n            this.players[0].destroy();\r\n        }\r\n\r\n        while (this.fireballs && this.fireballs.length > 0) {\r\n            this.fireballs[0].destroy();\r\n        }\r\n\r\n        if (this.game_map) {\r\n            this.game_map.destroy();\r\n            this.game_map = null;\r\n        }\r\n\r\n        if (this.notice_board) {\r\n            this.notice_board.destroy();\r\n            this.notice_board = null;\r\n        }\r\n\r\n        if (this.score_board) {\r\n            this.score_board.destroy();\r\n            this.score_board = null;\r\n        }\r\n\r\n        console.log(\"playground hide DONE\");\r\n    }\r\n\r\n    show_select_mode() {\r\n        this.hide();\r\n        router.push(\"/select_mode\");\r\n        this.destroy();\r\n    }\r\n\r\n    update() {\r\n        if (this.focus_player) {\r\n            this.ctx_x = this.focus_player.x;\r\n            this.ctx_y = this.focus_player.y;\r\n        }\r\n\r\n        this.render();\r\n    }\r\n\r\n    render() {\r\n    }\r\n}","\r\n<template>\r\n    <div class=\"chatfield\">\r\n        <div\r\n            class=\"ac-game-chat-field-history\"\r\n            ref=\"chat_field_history_ref\"\r\n            v-show=\"$store.state.show_history\"\r\n        ></div>\r\n\r\n        <input\r\n            type=\"text\"\r\n            ref=\"chat_field_input_ref\"\r\n            class=\"ac-game-chat-field-input\"\r\n            v-show=\"$store.state.chatting\"\r\n        />\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, ref, Vue } from \"vue\";\r\n// import animate from \"animate.css\"; // 渐变效果\r\nimport { ChatField } from \"@/assets/scripts/game_view/ChatField\";\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport \"bootstrap/dist/js/bootstrap.js\";\r\nimport { useStore } from \"vuex\";\r\nimport { placeholderSign } from \"element-plus/es/components/table-v2/src/private\";\r\n\r\nexport default {\r\n    name: \"ChatField\",\r\n    components: {},\r\n    props: {\r\n        // playground: {\r\n        //     type: Object,\r\n        //     default: {\r\n        //         message: \"null\",\r\n        //     },\r\n        // },\r\n    },\r\n    setup: (props) => {\r\n        const store = useStore();\r\n        let chat_field_input_ref = ref(null);\r\n        let chat_field_history_ref = ref(null);\r\n\r\n        onMounted(() => {});\r\n\r\n        return {\r\n            chat_field_input_ref,\r\n            chat_field_history_ref,\r\n        };\r\n    },\r\n    methods: {\r\n        // chat_focus() {\r\n        //     this.$refs.chat_field_input_ref.focus();\r\n        // },\r\n        // chat_flur() {\r\n        //     this.$refs.chat_field_input_ref.flur();\r\n        // },\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.ac-game-chat-field-history {\r\n    position: absolute;\r\n    top: 66%;\r\n    left: 20%;\r\n\r\n    transform: translate(-50%, -50%);\r\n\r\n    width: 20%;\r\n    height: 32%;\r\n\r\n    color: white;\r\n    font-size: 2vh;\r\n\r\n    padding: 5px;\r\n    overflow: auto;\r\n}\r\n\r\n.ac-game-chat-field-history::-webkit-scrollbar {\r\n    width: 0;\r\n}\r\n\r\n.ac-game-chat-field-input {\r\n    position: absolute;\r\n    top: 86%;\r\n    left: 20%;\r\n    transform: translate(-50%, -50%);\r\n\r\n    width: 20%;\r\n    height: 3vh;\r\n\r\n    color: white;\r\n    font-size: 2vh;\r\n\r\n    background-color: rgba(222, 225, 230, 0.2);\r\n}\r\n\r\n.bootstrap-input {\r\n    position: absolute;\r\n    top: 86%;\r\n    left: 20%;\r\n    transform: translate(-50%, -50%);\r\n\r\n    width: 20%;\r\n    height: 3vh;\r\n\r\n    color: white;\r\n    font-size: 2vh;\r\n\r\n    background-color: rgba(222, 225, 230, 0.2);\r\n}\r\n</style>","import { render } from \"./ChatField.vue?vue&type=template&id=383cf32c&scoped=true\"\nimport script from \"./ChatField.vue?vue&type=script&lang=js\"\nexport * from \"./ChatField.vue?vue&type=script&lang=js\"\n\nimport \"./ChatField.vue?vue&type=style&index=0&id=383cf32c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\16654\\\\Desktop\\\\Project\\\\Vue\\\\Awakened-Alliance-vue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-383cf32c\"]])\n\nexport default __exports__","import { render } from \"./PlayGroundView.vue?vue&type=template&id=1fc98392&scoped=true\"\nimport script from \"./PlayGroundView.vue?vue&type=script&lang=js\"\nexport * from \"./PlayGroundView.vue?vue&type=script&lang=js\"\n\nimport \"./PlayGroundView.vue?vue&type=style&index=0&id=1fc98392&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\16654\\\\Desktop\\\\Project\\\\Vue\\\\Awakened-Alliance-vue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1fc98392\"]])\n\nexport default __exports__","/*! js-cookie v3.0.1 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (key, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    key = encodeURIComponent(key)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      key + '=' + converter.write(value, key) + stringifiedAttributes)\n  }\n\n  function get (key) {\n    if (typeof document === 'undefined' || (arguments.length && !key)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var foundKey = decodeURIComponent(parts[0]);\n        jar[foundKey] = converter.read(value, foundKey);\n\n        if (key === foundKey) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return key ? jar[key] : jar\n  }\n\n  return Object.create(\n    {\n      set: set,\n      get: get,\n      remove: function (key, attributes) {\n        set(\n          key,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\nexport default api;\n"],"names":["init","store","window","refresh_id","confirm_login_status_web","Cookies","router","set_auto_refresh_jwt_token","getinfo_web","confirm_login_status_acapp","getinfo_acapp","refresh_jwt_token","clearInterval","setInterval","$","url","type","data","refresh","success","resp","console","log","access","expires_time","Date","expires","error","platform","state","headers","Authorization","result","commit","username","photo","AcWingOS","api","oauth2","authorize","appid","redirect_uri","scope","class","ref","tabindex","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","_component_ChatField","onClick","_ctx","AC_GAME_OBJECTS","AcGameObject","constructor","push","this","timedelta","has_called_start","uuid","create_uuid","res","i","x","parseInt","Math","floor","random","start","update","late_update","late_late_update","player_component_update","on_destroy","destroy","obj","splice","last_timestamp","step","timestamp","requestAnimationFrame","Grid","game_map","playground","ctx","j","cube_side_len","stroke_color","super","y","character","relative_position_x","relative_position_y","is_poisoned","base_fill_color","fill_color","grids","length","get_manhattan_dist","x1","y1","x2","y2","max","abs","get_dist","dx","dy","sqrt","scale","ctx_x","my_calculate_relative_position_x","ctx_y","my_calculate_relative_position_y","cx","cy","is_element_out_of_screen","set_player_point_color","set_color","render_grid_stroke","render","players","player","save","beginPath","lineWidth","strokeStyle","rect","stroke","restore","render_grass","fillStyle","grass_color","fill","Wall","eps","is_collision","wall_center_x","wall_center_y","real_dist","collision_angle","atan2","speed_angle","wall_inside_dist","cos","radius","PI","set_collision_color","get_new_angle","d","angle3","diff","color","Floor","MultiGameMap","canvas","width","virtual_map_width","height","virtual_map_height","nx","ceil","ny","wall_img","Image","src","background_color","load_map","generate_grid","get_random_color","colors","map","win","lose","restart","fillRect","Particle","vx","vy","speed","move_length","friction","moved","min","arc","FireBall","damage","cons_flag","update_move","update_attack","attack","distance","angle","flag","is_attacked","game_mode","mps","send_fireball_attack","level_up","level","fireballs","HealthBar","half_line","botton_on_player","game_state","moveTo","lineTo","health","Skill","icon_x","icon_y","icon_r","name","base_cold_time","cold_time","img","use_skill","receive_use_skill","update_code_time","render_icon","clip","drawImage","FireBallSkill","tx","ty","fireball","shoot_fireball","skill_data","send_use_general_skill","sin","BlinkSkill","blink","send_use_summoner_skill","ShieldSkill","shield_radius","base_duration_time","duration_time","generate_shield","send_use_awakened_skill","update_duration_time","update_destroy_ball","ball","Arrow","max_length","ctx_tx","ctx_ty","drawArrow","fromX","fromY","toX","toY","theta","headlen","angle1","angle2","topX","topY","botX","botY","arrowX","arrowY","Player","base_radis","base_speed","decelerate_ratio","hero_name","base_health","directions","Set","last_directions_size","skill_directions","last_skill_directions_size","cur_skill","rand_directions","spent_time","last_clientX","last_clientY","last_rect_left","last_rect_top","general_skill","awakened_skill","summoner_skill","health_bar","arrow","notice_board","add","player_count","write","focus","load_image","add_listening_events","get_speed","robot_update","change_state","transformation","transformation_restore","decelerate","change_decelerate_ratio","info","time","outer","decelerate_id","clearTimeout","setTimeout","transformation_radis_ratios","hero_info","heros_info","avatar","addEventListener","e","preventDefault","key","chat_field","show_input","hide_input","update_move_toward","delete","save_clientX_clientY_rectLeft_rectRight","which","my_calculate_tx_ty","use_general_skill","use_summoner_skill","destroy_fireball","scan_skills","has","clientX","clientY","getBoundingClientRect","left","top","my_calculate_tx","my_calculate_ty","update_speed_angle","size","player_lose","receive_attack","attacker","receive_fireball_attack","ball_uuid","score_board","append_player","auto_use_general_skill","move_to","check_collision","send_move_toward","update_win","RapidFireSkill","owner","skill_type","base_fire_interval","fire_interval","base_bullet","bullet","scatter","fresh_cold_time","fireball_list","rapid_fire","ball_uuid_list","delta_angle","RollingSkill","rolling","TaiEr","MagicLightBallSkill","fire","MagicCircle","transformation_radis_ratio","base_circle_duration","circle_duration","base_magic_duration","magic_duration","transformation_players","update_inner_player","transformation_inner_player","restore_players","clear","MagicalMagicSkill","magic","magic_circle","XiaoYe","DivineAxeSkill","player_base_speed","hit_numbers","axe_length","axe_width","base_duration","duration","base_accelerate_time","accelerate_time","is_accelerating","accelerate_ratio","can_hit","axe","restore_accelerate","update_hit_player","accelerate","back","hit_palyer","is_hit","new_angle","send_attack","center_point_x","center_point_y","dist","dist_x","dist_y","HeroChargeSkill","base_move_length","inner_players","player_arrow_angle","charge","update_inner_player_move","LongYan","IceArrow","decelerate_time","send_player_change_state","IceArrowSkill","archery","ThousandArrowsSkill","DiShiTian","MultiPlayerSocket","ws","WebSocket","receive","onmessage","JSON","parse","event","receive_create_player","receive_move_toward","directions_array","receive_use_general_skill","receive_use_awakened_skill","receive_use_summoner_skill","attackee_uuid","receive_chat_message","text","receive_update_player_info","receive_player_change_state","get_player","send_create_player","send","stringify","send_update_player_info","select_hero_name","rand_x","rand_y","attackee","receive_blink","send_chat_message","receive_add_message","NoticeBoard","font","textAlign","fillText","ChatField","chat_field_ref","func_id","chat_field_input_ref","value","add_message","render_message","message","chat_field_history_ref","append","scrollTop","scrollHeight","show_history","ScoreBoard","win_img","lose_img","show_select_mode","update_score","len","PlayGround","div","clientWidth","clientHeight","resize","resize_uuid","on","on_close","off","hide","quit","re_calculate_cx_cy","focus_player","onopen","score","record","rank_score","chatting","components","props","setup","useStore","onMounted","methods","__exports__","namespaced","quit_game_button","getContext","quit_the_game","assign","target","arguments","source","defaultConverter","read","slice","replace","decodeURIComponent","encodeURIComponent","converter","defaultAttributes","set","attributes","document","now","toUTCString","escape","stringifiedAttributes","attributeName","split","cookie","get","cookies","jar","parts","join","foundKey","Object","create","remove","withAttributes","withConverter","freeze","path"],"sourceRoot":""}